{"version":3,"sources":["theme.js","course/api-course.js","enrollment/api-enrollment.js","auth/api-auth.js","auth/auth-helper.js","enrollment/Enroll.js","course/Courses.js","enrollment/Enrollments.js","core/Home.js","user/api-user.js","user/Users.js","user/Signup.js","auth/Signin.js","user/EditProfile.js","user/DeleteUser.js","user/Profile.js","auth/PrivateRoute.js","course/NewCourse.js","course/MyCourses.js","core/Menu.js","course/DeleteCourse.js","course/NewLesson.js","course/Course.js","course/EditCourse.js","enrollment/Enrollment.js","MainRouter.js","App.js","reportWebVitals.js","index.js"],"names":["theme","createMuiTheme","typography","useNextVariants","palette","primary","light","main","dark","contrastText","secondary","openTitle","protectedTitle","pink","type","create","params","credentials","course","a","fetch","userId","method","headers","t","body","response","json","console","log","read","signal","courseId","update","remove","listByInstructor","newLesson","lesson","JSON","stringify","listPublished","listEnrolled","enrollmentStats","enrollmentId","complete","enrollment","signin","user","signout","auth","isAuthenticated","window","sessionStorage","getItem","parse","authenticate","jwt","cb","setItem","clearJWT","removeItem","then","data","document","cookie","updateUser","useStyles","makeStyles","form","minWidth","Enroll","props","useState","error","redirect","values","setValues","to","Button","variant","color","onClick","token","_id","title","padding","spacing","media","minHeight","gridList","width","tile","textAlign","border","backgroundColor","image","height","tileBar","tileTitle","fontSize","marginBottom","display","action","margin","Courses","classes","GridList","cellHeight","className","cols","courses","map","i","common","find","enrolled","findCommon","GridListTile","style","src","alt","name","GridListTileBar","subtitle","category","actionIcon","container","paddingBottom","progress","Enrollments","enrollments","completed","card","marginTop","extraTop","enrolledTitle","enrolledCard","divider","noTitle","marginLeft","Home","setCourses","setEnrolled","useEffect","abortController","AbortController","abort","Card","Typography","component","length","list","root","mixins","gutters","Users","users","setUsers","Paper","elevation","List","dense","item","ListItem","button","ListItemAvatar","Avatar","ListItemText","ListItemSecondaryAction","IconButton","maxWidth","verticalAlign","textField","marginRight","submit","Signup","password","email","open","handleChange","event","target","value","CardContent","TextField","id","label","onChange","Icon","CardActions","undefined","Dialog","disableBackdropClick","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","Signin","redirectToReferrer","from","location","state","pathname","EditProfile","match","redirectToProfile","educator","subheading","FormControlLabel","control","Switch","checked","bar","DeleteUser","setOpen","setRedirect","handleRequestClose","aria-label","onClose","bigAvatar","Profile","setUser","redirectToSignin","setRedirectToSignin","photoUrl","Date","getTime","Divider","created","toDateString","PrivateRoute","Component","rest","render","input","filename","NewCourse","description","files","accept","htmlFor","multiline","rows","courseData","FormData","append","addButton","float","leftIcon","avatar","borderRadius","listText","MyCourses","isActive","history","path","isPartActive","includes","Menu","withRouter","AppBar","position","zIndex","Toolbar","push","DeleteCourse","onRemove","NewLesson","content","resource_url","handleClose","aria-labelledby","fullWidth","addLesson","flex","details","sub","icon","justifyContent","statSpan","alignItems","enroll","Course","stats","setStats","instructor","setCourse","imageUrl","CardHeader","subheader","published","lessons","totalEnrolled","totalCompleted","CardMedia","index","upArrow","textfield","EditCourse","handleLessonChange","deleteLesson","splice","moveUp","edge","heading","fontWeight","background","drawer","flexShrink","drawerPaper","flexGrow","toolbar","selectedDrawer","unselected","check","subhead","para","whiteSpace","Enrollment","lessonStatus","setEnrollment","totalComplete","setTotalComplete","count","reduce","total","selectDrawer","Drawer","paper","ListItemIcon","ListSubheader","updatedData","lessonStatusId","courseCompleted","now","href","MainRouter","exact","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.acf86424.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles'\r\nimport { pink } from '@material-ui/core/colors'\r\n\r\nconst theme = createMuiTheme({\r\n    typography: {\r\n        useNextVariants: true,\r\n    },\r\n    palette: {\r\n        primary: {\r\n            light: '#5c67a3',\r\n            main: '#3f4771',\r\n            dark: '#2e355b',\r\n            contrastText: '#fff',\r\n        },\r\n        secondary: {\r\n            light: '#ff79b0',\r\n            main: '#ff4081',\r\n            dark: '#c60055',\r\n            contrastText: '#000',\r\n        },\r\n        openTitle: '#3f4771',\r\n        protectedTitle: pink['400'],\r\n        type: 'light'\r\n    }\r\n})\r\n\r\nexport default theme","const create = async (params, credentials, course) => {\n    try {\n        let response = await fetch('/api/courses/by/'+ params.userId, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Authorization': 'Bearer ' + credentials.t\n          },\n          body: course\n        })\n          return response.json()\n        } catch(err) { \n          console.log(err)\n        }\n  }\n  \n  const list = async (signal) => {\n    try {\n      let response = await fetch('/api/courses/', {\n        method: 'GET',\n        signal: signal,\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const read = async (params, signal) => {\n    try {\n      let response = await fetch('/api/courses/' + params.courseId, {\n        method: 'GET',\n        signal: signal,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        }\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const update = async (params, credentials, course) => {\n    try {\n      let response = await fetch('/api/courses/' + params.courseId, {\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        },\n        body: course\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const remove = async (params, credentials) => {\n    try {\n      let response = await fetch('/api/courses/' + params.courseId, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        }\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n\n  const listByInstructor = async (params, credentials, signal) => {\n    try {\n      let response = await fetch('/api/courses/by/'+params.userId, {\n        method: 'GET',\n        signal: signal,\n        headers: {\n          'Accept': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        }\n      })\n      return response.json()\n    } catch(err){\n      console.log(err)\n    }\n  }\n\n  const newLesson = async (params, credentials, lesson) => {\n    try {\n      let response = await fetch('/api/courses/'+params.courseId+'/lesson/new', {\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        },\n        body: JSON.stringify({lesson:lesson})\n      })\n      return response.json()\n    } catch(err){\n      console.log(err)\n    }\n  }\n  const listPublished = async (signal) => {\n    try {\n      let response = await fetch('/api/courses/published', {\n        method: 'GET',\n        signal: signal,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n        }\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  export {\n    create,\n    list,\n    read,\n    update,\n    remove,\n    listByInstructor,\n    newLesson,\n    listPublished\n  }","const create = async (params, credentials) => {\n    try {\n        let response = await fetch('/api/enrollment/new/'+params.courseId, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + credentials.t\n          }\n        })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const listEnrolled = async (credentials, signal) => {\n    try {\n      let response = await fetch('/api/enrollment/enrolled', {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Authorization': 'Bearer ' + credentials.t\n        },\n        signal: signal,\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n\n  const enrollmentStats = async (params, credentials, signal) => {\n    try {\n      let response = await fetch('/api/enrollment/stats/'+params.courseId, {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Authorization': 'Bearer ' + credentials.t\n        },\n        signal: signal,\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const read = async (params, credentials, signal) => {\n    try {\n      let response = await fetch('/api/enrollment/' + params.enrollmentId, {\n        method: 'GET',\n        signal: signal,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        }\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const complete = async (params, credentials, enrollment) => {\n    try {\n      let response = await fetch('/api/enrollment/complete/' + params.enrollmentId, {\n        method: 'PUT',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        },\n        body: JSON.stringify(enrollment)\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  const remove = async (params, credentials) => {\n    try {\n      let response = await fetch('/api/enrollment/' + params.enrollmentId, {\n        method: 'DELETE',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + credentials.t\n        }\n      })\n      return await response.json()\n    } catch(err) {\n      console.log(err)\n    }\n  }\n  \n  export {\n    create,\n    read,\n    complete,\n    remove,\n    listEnrolled,\n    enrollmentStats\n  }","const signin = async (user) => {\n  try {\n    let response = await fetch('/auth/signin/', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include',\n      body: JSON.stringify(user)\n    })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nconst signout = async () => {\n  try {\n    let response = await fetch('/auth/signout/', { method: 'GET' })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nexport {\n  signin,\n  signout\n}","import { signout } from './api-auth.js'\n\nconst auth = {\n  isAuthenticated() {\n    if (typeof window == \"undefined\")\n      return false\n\n    if (sessionStorage.getItem('jwt'))\n      return JSON.parse(sessionStorage.getItem('jwt'))\n    else\n      return false\n  },\n  authenticate(jwt, cb) {\n    if (typeof window !== \"undefined\")\n      sessionStorage.setItem('jwt', JSON.stringify(jwt))\n    cb()\n  },\n  clearJWT(cb) {\n    if (typeof window !== \"undefined\")\n      sessionStorage.removeItem('jwt')\n    cb()\n    //optional\n    signout().then((data) => {\n      document.cookie = \"t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\"\n    })\n  },\n  updateUser(user, cb) {\n    if(typeof window !== \"undefined\"){\n      if(sessionStorage.getItem('jwt')){\n         let auth = JSON.parse(sessionStorage.getItem('jwt'))\n         auth.user = user\n         sessionStorage.setItem('jwt', JSON.stringify(auth))\n         cb()\n       }\n    }\n  }\n}\n\nexport default auth\n","import React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport {makeStyles} from '@material-ui/core/styles'\nimport {create} from './api-enrollment'\nimport auth from './../auth/auth-helper'\nimport {Redirect} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n    form: {\n        minWidth: 500\n    }\n}))\n\nexport default function Enroll(props) {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n    enrollmentId: '',\n    error: '',\n    redirect: false\n  })\n  const jwt = auth.isAuthenticated()\n  const clickEnroll = () => {\n    create({\n      courseId: props.courseId\n    }, {\n      t: jwt.token\n    }).then((data) => {\n      if (data && data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({...values, enrollmentId: data._id, redirect: true})\n      }\n    })\n  }\n\n    if(values.redirect){\n        return (<Redirect to={'/learn/'+values.enrollmentId}/>)\n    }\n\n  return (\n      <Button variant=\"contained\" color=\"secondary\" onClick={clickEnroll}> Enroll </Button>\n  )\n}\n\nEnroll.propTypes = {\n  courseId: PropTypes.string.isRequired\n}\n","import React, {useState, useEffect} from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\nimport GridList from '@material-ui/core/GridList'\nimport GridListTile from '@material-ui/core/GridListTile'\nimport GridListTileBar from '@material-ui/core/GridListTileBar'\nimport {Link} from 'react-router-dom'\nimport auth from './../auth/auth-helper'\nimport Enroll from './../enrollment/Enroll'\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    padding:`${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle\n  },\n  media: {\n    minHeight: 400\n  },\n  gridList: {\n    width: '100%',\n    minHeight: 200,\n    padding: '16px 0 0px'\n  },\n  tile: {\n    textAlign: 'center',\n    border: '1px solid #cecece',\n    backgroundColor:'#04040c'\n  },\n  image: {\n    height: '100%'\n  },\n  tileBar: {\n    backgroundColor: 'rgba(0, 0, 0, 0.85)',\n    textAlign: 'left'\n  },\n  tileTitle: {\n    fontSize:'1.1em',\n    marginBottom:'5px',\n    color:'#fffde7',\n    display:'block'\n  },\n  action:{\n    margin: '0 10px'\n  }\n}))\n\nexport default function Courses(props){\n  const classes = useStyles()\n  const findCommon = (course) => {\n    return !props.common.find((enrolled)=>{return enrolled.course._id == course._id})\n  }\n    return (\n        <GridList cellHeight={220} className={classes.gridList} cols={2}>\n          {props.courses.map((course, i) => {\n            return (\n            findCommon(course) &&\n              <GridListTile className={classes.tile} key={i} style={{padding:0}}>\n                <Link to={\"/course/\"+course._id}><img className={classes.image} src={'/api/courses/photo/'+course._id} alt={course.name} /></Link>\n                <GridListTileBar className={classes.tileBar}\n                  title={<Link to={\"/course/\"+course._id} className={classes.tileTitle}>{course.name}</Link>}\n                  subtitle={<span>{course.category}</span>}\n                  actionIcon={\n                    <div className={classes.action}>\n                    {auth.isAuthenticated() ? <Enroll courseId={course._id}/> : <Link to=\"/signin\">Sign in to Enroll</Link>}\n                    </div>\n                  }\n                />\n              </GridListTile>)\n              }\n          )}\n        </GridList>\n    )\n}\n\nCourses.propTypes = {\n  courses: PropTypes.array.isRequired\n}","import React, {useState, useEffect} from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport GridList from '@material-ui/core/GridList'\nimport GridListTile from '@material-ui/core/GridListTile'\nimport GridListTileBar from '@material-ui/core/GridListTileBar'\nimport CompletedIcon from '@material-ui/icons/VerifiedUser'\nimport InProgressIcon from '@material-ui/icons/DonutLarge'\nimport {Link} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    padding:`${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle\n  },\n  media: {\n    minHeight: 400\n  },\n  container: {\n    minWidth: '100%',\n    paddingBottom: '14px'\n  },\n  gridList: {\n    width: '100%',\n    minHeight: 100,\n    padding: '12px 0 10px'\n  },\n  tile: {\n    textAlign: 'center'\n  },\n  image: {\n    height: '100%'\n  },\n  tileBar: {\n    backgroundColor: 'rgba(0, 0, 0, 0.85)',\n    textAlign: 'left'\n  },\n  tileTitle: {\n    fontSize:'1.1em',\n    marginBottom:'5px',\n    color:'#fffde7',\n    display:'block'\n  },\n  action:{\n    margin: '0 10px'\n  },\n  progress:{\n    color: '#b4f8b4'\n  }\n}))\n\nexport default function Enrollments(props){\n  const classes = useStyles()\n    return (\n      <div>\n        <GridList cellHeight={120} className={classes.gridList} cols={4}>\n          {props.enrollments.map((course, i) => (\n            <GridListTile key={i} className={classes.tile}>\n              <Link to={\"/learn/\"+course._id}><img className={classes.image} src={'/api/courses/photo/'+course.course._id} alt={course.course.name} /></Link>\n              <GridListTileBar className={classes.tileBar}\n                title={<Link to={\"/learn/\"+course._id} className={classes.tileTitle}>{course.course.name}</Link>}\n                actionIcon={<div className={classes.action}>\n                 {course.completed ? (<CompletedIcon color=\"secondary\"/>)\n                 : (<InProgressIcon className={classes.progress} />)\n                }</div>}\n              />\n            </GridListTile>\n          ))}\n        </GridList>\n    </div>\n    )\n}\n\n","import React, {useState, useEffect} from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport Divider from '@material-ui/core/Divider'\nimport {listPublished} from './../course/api-course'\nimport {listEnrolled, listCompleted} from './../enrollment/api-enrollment'\nimport Typography from '@material-ui/core/Typography'\nimport auth from './../auth/auth-helper'\nimport Courses from './../course/Courses'\nimport Enrollments from '../enrollment/Enrollments'\n\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    width:'90%',\n    margin: 'auto',\n    marginTop: 20,\n    marginBottom: theme.spacing(2),\n    padding: 20,\n    backgroundColor: '#ffffff' \n  },\n  extraTop: {\n    marginTop: theme.spacing(12)\n  },\n  title: {\n    padding:`${theme.spacing(3)}px ${theme.spacing(2.5)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle\n  },\n  media: {\n    minHeight: 400\n  },\n  gridList: {\n    width: '100%',\n    minHeight: 200,\n    padding: '16px 0 10px'\n  },\n  tile: {\n    textAlign: 'center'\n  },\n  image: {\n    height: '100%'\n  },\n  tileBar: {\n    backgroundColor: 'rgba(0, 0, 0, 0.72)',\n    textAlign: 'left'\n  },\n  enrolledTitle: {\n    color:'#efefef',\n    marginBottom: 5\n  },\n  action:{\n    margin: '0 10px'\n  },\n  enrolledCard: {\n    backgroundColor: '#616161',\n  },\n  divider: {\n    marginBottom: 16,\n    backgroundColor: 'rgb(157, 157, 157)'\n  },\n  noTitle: {\n    color: 'lightgrey',\n    marginBottom: 12,\n    marginLeft: 8\n  }\n}))\n\nexport default function Home(){\n  const classes = useStyles()\n  const jwt = auth.isAuthenticated()\n  const [courses, setCourses] = useState([])\n  const [enrolled, setEnrolled] = useState([])\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n    listEnrolled({t: jwt.token}, signal).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        setEnrolled(data)\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [])\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n    listPublished(signal).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        setCourses(data)\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [])\n    return (<div className={classes.extraTop}>\n      {auth.isAuthenticated().user && (\n      <Card className={`${classes.card} ${classes.enrolledCard}`}>\n        <Typography variant=\"h6\" component=\"h2\" className={classes.enrolledTitle}>\n            Courses you are enrolled in\n        </Typography>\n        {enrolled.length != 0 ? (<Enrollments enrollments={enrolled}/>)\n                             : (<Typography variant=\"body1\" className={classes.noTitle}>No courses.</Typography>)\n        }\n      </Card>\n      )}\n      <Card className={classes.card}>\n        <Typography variant=\"h5\" component=\"h2\">\n            All Courses\n        </Typography>\n        {(courses.length != 0 && courses.length != enrolled.length) ? (<Courses courses={courses} common={enrolled}/>) \n                             : (<Typography variant=\"body1\" className={classes.noTitle}>No new courses.</Typography>)\n        }\n      </Card>\n    </div>\n    )\n}\n\n","const create = async (user) => {\n  try {\n      let response = await fetch('/api/users/', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n      })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nconst list = async (signal) => {\n  try {\n    let response = await fetch('/api/users/', {\n      method: 'GET',\n      signal: signal,\n    })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nconst read = async (params, credentials, signal) => {\n  try {\n    let response = await fetch('/api/users/' + params.userId, {\n      method: 'GET',\n      signal: signal,\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + credentials.t\n      }\n    })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nconst update = async (params, credentials, user) => {\n  try {\n    let response = await fetch('/api/users/' + params.userId, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + credentials.t\n      },\n      body: JSON.stringify(user)\n    })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nconst remove = async (params, credentials) => {\n  try {\n    let response = await fetch('/api/users/' + params.userId, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + credentials.t\n      }\n    })\n    return await response.json()\n  } catch(err) {\n    console.log(err)\n  }\n}\n\nexport {\n  create,\n  list,\n  read,\n  update,\n  remove\n}","import React, {useState, useEffect} from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport ArrowForward from '@material-ui/icons/ArrowForward'\nimport Person from '@material-ui/icons/Person'\nimport {Link} from 'react-router-dom'\nimport {list} from './api-user.js'\n\nconst useStyles = makeStyles(theme => ({\n  root: theme.mixins.gutters({\n    padding: theme.spacing(1),\n    margin: theme.spacing(5),\n    marginTop: theme.spacing(12),\n  }),\n  title: {\n    margin: `${theme.spacing(4)}px 0 ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle\n  }\n}))\n\nexport default function Users() { \n  const classes = useStyles()\n  const [users, setUsers] = useState([])\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    list(signal).then((data) => {\n      if (data && data.error) {\n        console.log(data.error)\n      } else {\n        setUsers(data)\n      }\n    })\n\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [])\n\n\n    return (\n      <Paper className={classes.root} elevation={4}>\n        <Typography variant=\"h6\" className={classes.title}>\n          All Users\n        </Typography>\n        <List dense>\n         {users.map((item, i) => {\n          return <Link to={\"/user/\" + item._id} key={i}>\n                    <ListItem button>\n                      <ListItemAvatar>\n                        <Avatar>\n                          <Person/>\n                        </Avatar>\n                      </ListItemAvatar>\n                      <ListItemText primary={item.name}/>\n                      <ListItemSecondaryAction>\n                      <IconButton>\n                          <ArrowForward/>\n                      </IconButton>\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                 </Link>\n               })\n             }\n        </List>\n      </Paper>\n    )\n}\n","import React, {useState} from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {create} from './api-user.js'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport {Link} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(12),\n    paddingBottom: theme.spacing(2)\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  title: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.openTitle\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  }\n}))\n\nexport default function Signup() {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n    name: '',\n    password: '',\n    email: '',\n    open: false,\n    error: ''\n  })\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value })\n  }\n\n  const clickSubmit = () => {\n    const user = {\n      name: values.name || undefined,\n      email: values.email || undefined,\n      password: values.password || undefined\n    }\n    create(user).then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: data.error})\n      } else {\n        setValues({ ...values, error: '', open: true})\n      }\n    })\n  }\n\n    return (<div>\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h6\" className={classes.title}>\n            Sign Up\n          </Typography>\n          <TextField id=\"name\" label=\"Name\" className={classes.textField} value={values.name} onChange={handleChange('name')} margin=\"normal\"/><br/>\n          <TextField id=\"email\" type=\"email\" label=\"Email\" className={classes.textField} value={values.email} onChange={handleChange('email')} margin=\"normal\"/><br/>\n          <TextField id=\"password\" type=\"password\" label=\"Password\" className={classes.textField} value={values.password} onChange={handleChange('password')} margin=\"normal\"/>\n          <br/> {\n            values.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {values.error}</Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={clickSubmit} className={classes.submit}>Submit</Button>\n        </CardActions>\n      </Card>\n      <Dialog open={values.open} disableBackdropClick={true}>\n        <DialogTitle>New Account</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            New account successfully created.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Link to=\"/signin\">\n            <Button color=\"primary\" autoFocus=\"autoFocus\" variant=\"contained\">\n              Sign In\n            </Button>\n          </Link>\n        </DialogActions>\n      </Dialog>\n    </div>\n    )\n}","import React, {useState} from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport { makeStyles } from '@material-ui/core/styles'\nimport auth from './../auth/auth-helper'\nimport {Redirect} from 'react-router-dom'\nimport {signin} from './api-auth.js'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(12),\n    paddingBottom: theme.spacing(2)\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  title: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.openTitle\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  }\n}))\n\nexport default function Signin(props) {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n      email: '',\n      password: '',\n      error: '',\n      redirectToReferrer: false\n  })\n\n  const clickSubmit = () => {\n    const user = {\n      email: values.email || undefined,\n      password: values.password || undefined\n    }\n\n    signin(user).then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: data.error})\n      } else {\n        auth.authenticate(data, () => {\n          setValues({ ...values, error: '',redirectToReferrer: true})\n        })\n      }\n    })\n  }\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value })\n  }\n\n  const {from} = props.location.state || {\n      from: {\n        pathname: '/'\n      }\n  }\n  const {redirectToReferrer} = values\n  if (redirectToReferrer) {\n      return (<Redirect to={from}/>)\n  }\n\n  return (\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h6\" className={classes.title}>\n            Sign In\n          </Typography>\n          <TextField id=\"email\" type=\"email\" label=\"Email\" className={classes.textField} value={values.email} onChange={handleChange('email')} margin=\"normal\"/><br/>\n          <TextField id=\"password\" type=\"password\" label=\"Password\" className={classes.textField} value={values.password} onChange={handleChange('password')} margin=\"normal\"/>\n          <br/> {\n            values.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {values.error}\n            </Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={clickSubmit} className={classes.submit}>Submit</Button>\n        </CardActions>\n      </Card>\n    )\n}\n","import React, {useState, useEffect} from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport { makeStyles } from '@material-ui/core/styles'\nimport auth from './../auth/auth-helper'\nimport {read, update} from './api-user.js'\nimport {Redirect} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(12),\n    paddingBottom: theme.spacing(2)\n  },\n  title: {\n    margin: theme.spacing(2),\n    color: theme.palette.protectedTitle\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  }\n}))\n\nexport default function EditProfile({ match }) {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n    name: '',\n    password: '',\n    email: '',\n    open: false,\n    error: '',\n    redirectToProfile: false,\n    educator: false\n  })\n  const jwt = auth.isAuthenticated()\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    read({\n      userId: match.params.userId\n    }, {t: jwt.token}, signal).then((data) => {\n      if (data && data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({...values, name: data.name, email: data.email, educator: data.educator})\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n\n  }, [match.params.userId])\n\n  const clickSubmit = () => {\n    const user = {\n      name: values.name || undefined,\n      email: values.email || undefined,\n      password: values.password || undefined,\n      educator: values.educator \n    }\n    update({\n      userId: match.params.userId\n    }, {\n      t: jwt.token\n    }, user).then((data) => {\n      if (data && data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        auth.updateUser(data, ()=>{\n          setValues({...values, userId: data._id, redirectToProfile: true})\n        })\n      }\n    })\n  }\n  const handleChange = name => event => {\n    setValues({...values, [name]: event.target.value})\n  }\n  const handleCheck = (event, checked) => {\n    setValues({...values, educator: checked})\n  }\n\n    if (values.redirectToProfile) {\n      return (<Redirect to={'/user/' + values.userId}/>)\n    }\n    return (\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h6\" className={classes.title}>\n            Edit Profile\n          </Typography>\n          <TextField id=\"name\" label=\"Name\" className={classes.textField} value={values.name} onChange={handleChange('name')} margin=\"normal\"/><br/>\n          <TextField id=\"email\" type=\"email\" label=\"Email\" className={classes.textField} value={values.email} onChange={handleChange('email')} margin=\"normal\"/><br/>\n          <TextField id=\"password\" type=\"password\" label=\"Password\" className={classes.textField} value={values.password} onChange={handleChange('password')} margin=\"normal\"/><br/>\n          <br/>\n          <Typography variant=\"subtitle1\" className={classes.subheading}>\n            I am an Educator\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch classes={{\n                                checked: classes.checked,\n                                bar: classes.bar,\n                              }}\n                      checked={values.educator}\n                      onChange={handleCheck}\n              />}\n            label={values.educator? 'Yes' : 'No'}\n          />\n          <br/> {\n            values.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {values.error}\n            </Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={clickSubmit} className={classes.submit}>Submit</Button>\n        </CardActions>\n      </Card>\n    )\n}\n\n","import React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport IconButton from '@material-ui/core/IconButton'\nimport Button from '@material-ui/core/Button'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport auth from './../auth/auth-helper'\nimport {remove} from './api-user.js'\nimport {Redirect} from 'react-router-dom'\n\nexport default function DeleteUser(props) {\n  const [open, setOpen] = useState(false)\n  const [redirect, setRedirect] = useState(false)\n\n  const jwt = auth.isAuthenticated()\n  const clickButton = () => {\n    setOpen(true)\n  }\n  const deleteAccount = () => { \n    remove({\n      userId: props.userId\n    }, {t: jwt.token}).then((data) => {\n      if (data && data.error) {\n        console.log(data.error)\n      } else {\n        auth.clearJWT(() => console.log('deleted'))\n        setRedirect(true)\n      }\n    })\n  }\n  const handleRequestClose = () => {\n    setOpen(false)\n  }\n\n  if (redirect) {\n    return <Redirect to='/'/>\n  }\n    return (<span>\n      <IconButton aria-label=\"Delete\" onClick={clickButton} color=\"secondary\">\n        <DeleteIcon/>\n      </IconButton>\n\n      <Dialog open={open} onClose={handleRequestClose}>\n        <DialogTitle>{\"Delete Account\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Confirm to delete your account.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleRequestClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={deleteAccount} color=\"secondary\" autoFocus=\"autoFocus\">\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </span>)\n\n}\nDeleteUser.propTypes = {\n  userId: PropTypes.string.isRequired\n}\n\n","import React, { useState, useEffect } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Avatar from '@material-ui/core/Avatar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport Edit from '@material-ui/icons/Edit'\nimport Person from '@material-ui/icons/Person'\nimport Divider from '@material-ui/core/Divider'\nimport DeleteUser from './DeleteUser'\nimport auth from './../auth/auth-helper'\nimport {read} from './api-user.js'\nimport {Redirect, Link} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  root: theme.mixins.gutters({\n    maxWidth: 600,\n    margin: 'auto',\n    padding: theme.spacing(3),\n    marginTop: theme.spacing(12)\n  }),\n  title: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.protectedTitle\n  },\n  bigAvatar: {\n    width: 60,\n    height: 60,\n    margin: 10\n  }\n}))\n\nexport default function Profile({ match }) {\n  const classes = useStyles()\n  const [user, setUser] = useState({})\n  const [redirectToSignin, setRedirectToSignin] = useState(false)\n  const jwt = auth.isAuthenticated()\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    read({\n      userId: match.params.userId\n    }, {t: jwt.token}, signal).then((data) => {\n      if (data && data.error) {\n        setRedirectToSignin(true)\n      } else {\n        setUser(data)\n      }\n    })\n\n    return function cleanup(){\n      abortController.abort()\n    }\n\n  }, [match.params.userId])\n\n    if (redirectToSignin) {\n      return <Redirect to='/signin'/>\n    }\n  const photoUrl = user._id\n      ? `/api/users/photo/${user._id}?${new Date().getTime()}`\n      : null\n    return (\n      <Paper className={classes.root} elevation={4}>\n        <Typography variant=\"h6\" className={classes.title}>\n          Profile\n        </Typography>\n        <List dense>\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar src={photoUrl} className={classes.bigAvatar}/>\n            </ListItemAvatar>\n            <ListItemText primary={user.name} secondary={user.email}/> {\n             auth.isAuthenticated().user && auth.isAuthenticated().user._id == user._id &&\n              (<ListItemSecondaryAction>\n                <Link to={\"/user/edit/\" + user._id}>\n                  <IconButton aria-label=\"Edit\" color=\"primary\">\n                    <Edit/>\n                  </IconButton>\n                </Link>\n                <DeleteUser userId={user._id}/>\n              </ListItemSecondaryAction>)\n            }\n          </ListItem>\n          <Divider/>\n          <ListItem>\n            <ListItemText primary={\"Joined: \" + (\n              new Date(user.created)).toDateString()}/>\n          </ListItem>\n        </List>\n      </Paper>\n    )\n  }","import React, { Component } from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport auth from './auth-helper'\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n  <Route {...rest} render={props => (\n    auth.isAuthenticated() ? (\n      <Component {...props}/>\n    ) : (\n      <Redirect to={{\n        pathname: '/signin',\n        state: { from: props.location }\n      }}/>\n    )\n  )}/>\n)\n\nexport default PrivateRoute\n","import React, {useState} from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardActions from '@material-ui/core/CardActions'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport FileUpload from '@material-ui/icons/AddPhotoAlternate'\nimport auth from './../auth/auth-helper'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport Icon from '@material-ui/core/Icon'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {create} from './api-course.js'\nimport {Link, Redirect} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    maxWidth: 600,\n    margin: 'auto',\n    textAlign: 'center',\n    marginTop: theme.spacing(12),\n    paddingBottom: theme.spacing(2)\n  },\n  error: {\n    verticalAlign: 'middle'\n  },\n  title: {\n    marginTop: theme.spacing(2),\n    color: theme.palette.openTitle\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 300\n  },\n  submit: {\n    margin: 'auto',\n    marginBottom: theme.spacing(2)\n  },\n  input: {\n    display: 'none'\n  },\n  filename:{\n    marginLeft:'10px'\n  }\n}))\n\nexport default function NewCourse() {\n  const classes = useStyles()\n  const [values, setValues] = useState({\n      name: '',\n      description: '',\n      image: '',\n      category: '',\n      redirect: false,\n      error: ''\n  })\n  const jwt = auth.isAuthenticated()\n\n  const handleChange = name => event => {\n    const value = name === 'image'\n      ? event.target.files[0]\n      : event.target.value\n    setValues({...values, [name]: value })\n  }\n  const clickSubmit = () => {\n    let courseData = new FormData()\n    values.name && courseData.append('name', values.name)\n    values.description && courseData.append('description', values.description)\n    values.image && courseData.append('image', values.image)\n    values.category && courseData.append('category', values.category)\n    create({\n      userId: jwt.user._id\n    }, {\n      t: jwt.token\n    }, courseData).then((data) => {\n      if (data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setValues({...values, error: '', redirect: true})\n      }\n    })\n  }\n\n    if (values.redirect) {\n      return (<Redirect to={'/teach/courses'}/>)\n    }\n    return (<div>\n      <Card className={classes.card}>\n        <CardContent>\n          <Typography variant=\"h6\" className={classes.title}>\n            New Course\n          </Typography>\n          <br/>\n          <input accept=\"image/*\" onChange={handleChange('image')} className={classes.input} id=\"icon-button-file\" type=\"file\" />\n          <label htmlFor=\"icon-button-file\">\n            <Button variant=\"contained\" color=\"secondary\" component=\"span\">\n              Upload Photo\n              <FileUpload/>\n            </Button>\n          </label> <span className={classes.filename}>{values.image ? values.image.name : ''}</span><br/>\n          <TextField id=\"name\" label=\"Name\" className={classes.textField} value={values.name} onChange={handleChange('name')} margin=\"normal\"/><br/>\n          <TextField\n            id=\"multiline-flexible\"\n            label=\"Description\"\n            multiline\n            rows=\"2\"\n            value={values.description}\n            onChange={handleChange('description')}\n            className={classes.textField}\n            margin=\"normal\"\n          /><br/> \n          <TextField id=\"category\" label=\"Category\" className={classes.textField} value={values.category} onChange={handleChange('category')} margin=\"normal\"/><br/>\n          {\n            values.error && (<Typography component=\"p\" color=\"error\">\n              <Icon color=\"error\" className={classes.error}>error</Icon>\n              {values.error}</Typography>)\n          }\n        </CardContent>\n        <CardActions>\n          <Button color=\"primary\" variant=\"contained\" onClick={clickSubmit} className={classes.submit}>Submit</Button>\n          <Link to='/teach/courses' className={classes.submit}><Button variant=\"contained\">Cancel</Button></Link>\n        </CardActions>\n      </Card>\n    </div>)\n}\n","import React, {useState, useEffect} from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Avatar from '@material-ui/core/Avatar'\nimport Icon from '@material-ui/core/Icon'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport auth from './../auth/auth-helper'\nimport {listByInstructor} from './api-course.js'\nimport {Redirect, Link} from 'react-router-dom'\n\nconst useStyles = makeStyles(theme => ({\n  root: theme.mixins.gutters({\n    maxWidth: 600,\n    margin: 'auto',\n    padding: theme.spacing(3),\n    marginTop: theme.spacing(12)\n  }),\n  title: {\n    margin: `${theme.spacing(3)}px 0 ${theme.spacing(3)}px ${theme.spacing(1)}px` ,\n    color: theme.palette.protectedTitle,\n    fontSize: '1.2em'\n  },\n  addButton:{\n    float:'right'\n  },\n  leftIcon: {\n    marginRight: \"8px\"\n  },\n  avatar: {\n    borderRadius: 0,\n    width:65,\n    height: 40\n  },\n  listText: {\n    marginLeft: 16\n  }\n}))\n\nexport default function MyCourses(){\n  const classes = useStyles()\n  const [courses, setCourses] = useState([])\n  const [redirectToSignin, setRedirectToSignin] = useState(false)\n  const jwt = auth.isAuthenticated()\n\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n    listByInstructor({\n      userId: jwt.user._id\n    }, {t: jwt.token}, signal).then((data) => {\n      if (data.error) {\n        setRedirectToSignin(true)\n      } else {\n        setCourses(data)\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [])\n\n  if (redirectToSignin) {\n    return <Redirect to='/signin'/>\n  }\n  return (\n    <div>\n      <Paper className={classes.root} elevation={4}>\n        <Typography type=\"title\" className={classes.title}>\n          Your Courses\n          <span className={classes.addButton}>\n            <Link to=\"/teach/course/new\">\n              <Button color=\"primary\" variant=\"contained\">\n                <Icon className={classes.leftIcon}>add_box</Icon>  New Course\n              </Button>\n            </Link>\n          </span>\n        </Typography>\n        <List dense>\n        {courses.map((course, i) => {\n            return   <Link to={\"/teach/course/\"+course._id} key={i}>\n              <ListItem button>\n                <ListItemAvatar>\n                  <Avatar src={'/api/courses/photo/'+course._id+\"?\" + new Date().getTime()} className={classes.avatar}/>\n                </ListItemAvatar>\n                <ListItemText primary={course.name} secondary={course.description} className={classes.listText}/>\n              </ListItem>\n              <Divider/>\n            </Link>})}\n        </List>\n      </Paper>\n    </div>)\n}","import React from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport HomeIcon from '@material-ui/icons/Home'\nimport Library from '@material-ui/icons/LocalLibrary'\nimport Button from '@material-ui/core/Button'\nimport auth from './../auth/auth-helper'\nimport {Link, withRouter} from 'react-router-dom'\n\nconst isActive = (history, path) => {\n  if (history.location.pathname == path)\n    return {color: '#f57c00'}\n  else\n    return {color: '#fffde7'}\n}\nconst isPartActive = (history, path) => {\n  if (history.location.pathname.includes(path))\n    return {color: '#fffde7', backgroundColor: '#f57c00', marginRight:10}\n  else\n    return {color: '#616161', backgroundColor: '#fffde7', border:'1px solid #f57c00', marginRight:10}\n}\nconst Menu = withRouter(({history}) => (\n  <AppBar position=\"fixed\" style={{zIndex:12343455}}>\n    <Toolbar>\n      <Typography variant=\"h6\" color=\"inherit\">\n        MERN Classroom\n      </Typography>\n      <div>\n        <Link to=\"/\">\n          <IconButton aria-label=\"Home\" style={isActive(history, \"/\")}>\n            <HomeIcon/>\n          </IconButton>\n        </Link>\n        <Link to=\"/users\">\n          <Button style={isActive(history, \"/users\")}>Users</Button>\n        </Link>\n      </div>\n      <div style={{'position':'absolute', 'right': '10px'}}><span style={{'float': 'right'}}>\n      {\n        !auth.isAuthenticated() && (<span>\n          <Link to=\"/signup\">\n            <Button style={isActive(history, \"/signup\")}>Sign up\n            </Button>\n          </Link>\n          <Link to=\"/signin\">\n            <Button style={isActive(history, \"/signin\")}>Sign In\n            </Button>\n          </Link>\n\n        </span>)\n      }\n      {\n        auth.isAuthenticated() && (<span>\n          {auth.isAuthenticated().user.educator && (<Link to=\"/teach/courses\"><Button style={isPartActive(history, \"/teach/\")}><Library/> Teach</Button></Link>)}\n          <Link to={\"/user/\" + auth.isAuthenticated().user._id}>\n            <Button style={isActive(history, \"/user/\" + auth.isAuthenticated().user._id)}>My Profile</Button>\n          </Link>\n          <Button color=\"inherit\" onClick={() => {\n              auth.clearJWT(() => history.push('/'))\n            }}>Sign out</Button>\n        </span>)\n      }\n      </span></div>\n    </Toolbar>\n  </AppBar>\n))\n\nexport default Menu\n","import React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport IconButton from '@material-ui/core/IconButton'\nimport Button from '@material-ui/core/Button'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport auth from './../auth/auth-helper'\nimport {remove} from './api-course.js'\n\nexport default function DeleteCourse(props) {\n  const [open, setOpen] = useState(false)\n  \n  const jwt = auth.isAuthenticated()\n  const clickButton = () => {\n    setOpen(true)\n  }\n  const deleteCourse = () => {\n    remove({\n      courseId: props.course._id\n    }, {t: jwt.token}).then((data) => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        setOpen(false)\n        props.onRemove(props.course)\n      }\n    })\n  }\n  const handleRequestClose = () => {\n    setOpen(false)\n  }\n    return (<span>\n      <IconButton aria-label=\"Delete\" onClick={clickButton} color=\"secondary\">\n        <DeleteIcon/>\n      </IconButton>\n\n      <Dialog open={open} onClose={handleRequestClose}>\n        <DialogTitle>{\"Delete \"+props.course.name}</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Confirm to delete your course {props.course.name}.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleRequestClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={deleteCourse} color=\"secondary\" autoFocus=\"autoFocus\">\n            Confirm\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </span>)\n}\nDeleteCourse.propTypes = {\n  course: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n}","import React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Add from '@material-ui/icons/AddBox'\nimport {makeStyles} from '@material-ui/core/styles'\nimport {newLesson} from './api-course'\nimport auth from './../auth/auth-helper'\n\nconst useStyles = makeStyles(theme => ({\n    form: {\n        minWidth: 500\n    }\n}))\n\nexport default function NewLesson(props) {\n  const classes = useStyles()\n  const [open, setOpen] = useState(false)\n  const [values, setValues] = useState({\n    title: '',\n    content: '',\n    resource_url: ''\n  })\n  \n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value })\n  }\n  const clickSubmit = () => {\n    const jwt = auth.isAuthenticated()\n    const lesson = {\n      title: values.title || undefined,\n      content: values.content || undefined,\n      resource_url: values.resource_url || undefined\n    }\n    newLesson({\n      courseId: props.courseId\n    }, {\n      t: jwt.token\n    }, lesson).then((data) => {\n      if (data && data.error) {\n        setValues({...values, error: data.error})\n      } else {\n          props.addLesson(data)\n          setValues({...values, title: '',\n          content: '',\n          resource_url: ''})\n          setOpen(false)\n      }\n    })\n  }\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <div>\n      <Button aria-label=\"Add Lesson\" color=\"primary\" variant=\"contained\" onClick={handleClickOpen}>\n        <Add/> &nbsp; New Lesson\n      </Button>\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n      <div className={classes.form}>\n        <DialogTitle id=\"form-dialog-title\">Add New Lesson</DialogTitle>\n        <DialogContent>\n          \n          <TextField\n            margin=\"dense\"\n            label=\"Title\"\n            type=\"text\"\n            fullWidth\n            value={values.title} onChange={handleChange('title')}\n          /><br/>\n          <TextField\n            margin=\"dense\"\n            label=\"Content\"\n            type=\"text\"\n            multiline\n            rows=\"5\"\n            fullWidth\n            value={values.content} onChange={handleChange('content')}\n          /><br/>\n          <TextField\n            margin=\"dense\"\n            label=\"Resource link\"\n            type=\"text\"\n            fullWidth\n            value={values.resource_url} onChange={handleChange('resource_url')}\n          /><br/>\n          \n        </DialogContent>\n        \n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\" variant=\"contained\">\n            Cancel\n          </Button>\n          <Button onClick={clickSubmit} color=\"secondary\" variant=\"contained\">\n            Add\n          </Button>\n        </DialogActions>\n        </div>\n      </Dialog>\n    </div>\n  )\n}\nNewLesson.propTypes = {\n    courseId: PropTypes.string.isRequired,\n    addLesson: PropTypes.func.isRequired\n  }","import React, {useState, useEffect}  from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Edit from '@material-ui/icons/Edit'\nimport PeopleIcon from '@material-ui/icons/Group'\nimport CompletedIcon from '@material-ui/icons/VerifiedUser'\nimport Button from '@material-ui/core/Button'\nimport {makeStyles} from '@material-ui/core/styles'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport {read, update} from './api-course.js'\nimport {enrollmentStats} from './../enrollment/api-enrollment'\nimport {Link, Redirect} from 'react-router-dom'\nimport auth from './../auth/auth-helper'\nimport DeleteCourse from './DeleteCourse'\nimport Divider from '@material-ui/core/Divider'\nimport NewLesson from './NewLesson'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Enroll from './../enrollment/Enroll'\n\nconst useStyles = makeStyles(theme => ({\n    root: theme.mixins.gutters({\n        maxWidth: 800,\n        margin: 'auto',\n        padding: theme.spacing(3),\n        marginTop: theme.spacing(12)\n      }),\n  flex:{\n    display:'flex',\n    marginBottom: 20\n  },\n  card: {\n    padding:'24px 40px 40px'\n  },\n  subheading: {\n    margin: '10px',\n    color: theme.palette.openTitle\n  },\n  details: {\n    margin: '16px',\n  },\n  sub: {\n    display: 'block',\n    margin: '3px 0px 5px 0px',\n    fontSize: '0.9em'\n  },\n  media: {\n    height: 190,\n    display: 'inline-block',\n    width: '100%',\n    marginLeft: '16px'\n  },\n  icon: {\n    verticalAlign: 'sub'\n  },\n  category:{\n    color: '#5c5c5c',\n    fontSize: '0.9em',\n    padding: '3px 5px',\n    backgroundColor: '#dbdbdb',\n    borderRadius: '0.2em',\n    marginTop: 5\n  },\n  action: {\n    margin: '10px 0px',\n    display: 'flex',\n    justifyContent: 'flex-end'\n  },\n  statSpan: {\n    margin: '7px 10px 0 10px',\n    alignItems: 'center',\n    color: '#616161',\n    display: 'inline-flex',\n    '& svg': {\n      marginRight: 10,\n      color: '#b6ab9a'\n    }\n  },\n  enroll:{\n    float: 'right'\n  }\n}))\n\nexport default function Course ({match}) {\n  const classes = useStyles()\n  const [stats, setStats] = useState({})\n  const [course, setCourse] = useState({instructor:{}})\n  const [values, setValues] = useState({\n      redirect: false,\n      error: ''\n    })\n  const [open, setOpen] = useState(false)\n  const jwt = auth.isAuthenticated()\n    useEffect(() => {\n      const abortController = new AbortController()\n      const signal = abortController.signal\n  \n      read({courseId: match.params.courseId}, signal).then((data) => {\n        if (data.error) {\n          setValues({...values, error: data.error})\n        } else {\n          setCourse(data)\n        }\n      })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [match.params.courseId])\n  useEffect(() => {\n    const abortController = new AbortController()\n    const signal = abortController.signal\n\n    enrollmentStats({courseId: match.params.courseId}, {t:jwt.token}, signal).then((data) => {\n      if (data.error) {\n        setValues({...values, error: data.error})\n      } else {\n        setStats(data)\n      }\n    })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [match.params.courseId])\n  const removeCourse = (course) => {\n    setValues({...values, redirect:true})\n  }\n  const addLesson = (course) => {\n    setCourse(course)\n  }\n  const clickPublish = () => {\n    if(course.lessons.length > 0){    \n      setOpen(true)\n    }\n  }\n  const publish = () => {\n    let courseData = new FormData()\n      courseData.append('published', true)\n      update({\n          courseId: match.params.courseId\n        }, {\n          t: jwt.token\n        }, courseData).then((data) => {\n          if (data && data.error) {\n            setValues({...values, error: data.error})\n          } else {\n            setCourse({...course, published: true})\n            setOpen(false)\n          }\n      })\n  }\n  const handleClose = () => {\n    setOpen(false)\n  }\n  if (values.redirect) {\n    return (<Redirect to={'/teach/courses'}/>)\n  }\n    const imageUrl = course._id\n          ? `/api/courses/photo/${course._id}?${new Date().getTime()}`\n          : null\n    return (\n        <div className={classes.root}>\n              <Card className={classes.card}>\n                <CardHeader\n                  title={course.name}\n                  subheader={<div>\n                        <Link to={\"/user/\"+course.instructor._id} className={classes.sub}>By {course.instructor.name}</Link>\n                        <span className={classes.category}>{course.category}</span>\n                      </div>\n                    }\n                  action={<>\n             {auth.isAuthenticated().user && auth.isAuthenticated().user._id == course.instructor._id &&\n                (<span className={classes.action}>\n                  <Link to={\"/teach/course/edit/\" + course._id}>\n                    <IconButton aria-label=\"Edit\" color=\"secondary\">\n                      <Edit/>\n                    </IconButton>\n                  </Link>\n                {!course.published ? (<>\n                  <Button color=\"secondary\" variant=\"outlined\" onClick={clickPublish}>{course.lessons.length == 0 ? \"Add atleast 1 lesson to publish\" : \"Publish\"}</Button>\n                  <DeleteCourse course={course} onRemove={removeCourse}/>\n                </>) : (\n                  <Button color=\"primary\" variant=\"outlined\">Published</Button>\n                )}\n                </span>)\n             }\n                {course.published && (<div>\n                  <span className={classes.statSpan}><PeopleIcon /> {stats.totalEnrolled} enrolled </span>\n                  <span className={classes.statSpan}><CompletedIcon/> {stats.totalCompleted} completed </span>\n                  </div>\n                  )}\n                \n                </>\n            }\n                />\n                <div className={classes.flex}>\n                  <CardMedia\n                    className={classes.media}\n                    image={imageUrl}\n                    title={course.name}\n                  />\n                  <div className={classes.details}>\n                    <Typography variant=\"body1\" className={classes.subheading}>\n                        {course.description}<br/>\n                    </Typography>\n                    \n              {course.published && <div className={classes.enroll}><Enroll courseId={course._id}/></div>} \n                    \n                    \n                  </div>\n                </div>\n                <Divider/>\n                <div>\n                <CardHeader\n                  title={<Typography variant=\"h6\" className={classes.subheading}>Lessons</Typography>\n                }\n                  subheader={<Typography variant=\"body1\" className={classes.subheading}>{course.lessons && course.lessons.length} lessons</Typography>}\n                  action={\n             auth.isAuthenticated().user && auth.isAuthenticated().user._id == course.instructor._id && !course.published &&\n                (<span className={classes.action}>\n                  <NewLesson courseId={course._id} addLesson={addLesson}/>\n                </span>)\n            }\n                />\n                <List>\n                {course.lessons && course.lessons.map((lesson, index) => {\n                    return(<span key={index}>\n                    <ListItem>\n                    <ListItemAvatar>\n                        <Avatar>\n                        {index+1}\n                        </Avatar>\n                    </ListItemAvatar>\n                    <ListItemText\n                        primary={lesson.title}\n                    />\n                    </ListItem>\n                    <Divider variant=\"inset\" component=\"li\" />\n                    </span>)\n                }\n                )}\n                </List>\n                </div>\n              </Card>\n              <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Publish Course</DialogTitle>\n                <DialogContent>\n                  <Typography variant=\"body1\">Publishing your course will make it live to students for enrollment. </Typography><Typography variant=\"body1\">Make sure all lessons are added and ready for publishing.</Typography></DialogContent>\n                <DialogActions>\n                <Button onClick={handleClose} color=\"primary\" variant=\"contained\">\n                  Cancel\n                </Button>\n                <Button onClick={publish} color=\"secondary\" variant=\"contained\">\n                  Publish\n                </Button>\n              </DialogActions>\n             </Dialog>   \n        </div>)\n}\n","import React, {useState, useEffect}  from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport FileUpload from '@material-ui/icons/AddPhotoAlternate'\nimport ArrowUp from '@material-ui/icons/ArrowUpward'\nimport Button from '@material-ui/core/Button'\nimport {makeStyles} from '@material-ui/core/styles'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport TextField from '@material-ui/core/TextField'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport {read, update} from './api-course.js'\nimport {Link, Redirect} from 'react-router-dom'\nimport auth from './../auth/auth-helper'\nimport Divider from '@material-ui/core/Divider'\n\nconst useStyles = makeStyles(theme => ({\n    root: theme.mixins.gutters({\n        maxWidth: 800,\n        margin: 'auto',\n        padding: theme.spacing(3),\n        marginTop: theme.spacing(12)\n      }),\n  flex:{\n    display:'flex',\n    marginBottom: 20\n  },\n  card: {\n    padding:'24px 40px 40px'\n  },\n  subheading: {\n    margin: '10px',\n    color: theme.palette.openTitle\n  },\n  details: {\n    margin: '16px',\n  },\n  upArrow: {\n      border: '2px solid #f57c00',\n      marginLeft: 3,\n      marginTop: 10,\n      padding:4\n },\n  sub: {\n    display: 'block',\n    margin: '3px 0px 5px 0px',\n    fontSize: '0.9em'\n  },\n  media: {\n    height: 250,\n    display: 'inline-block',\n    width: '50%',\n    marginLeft: '16px'\n  },\n  icon: {\n    verticalAlign: 'sub'\n  },\n  textfield:{\n    width: 350\n  },\n  action: {\n    margin: '8px 24px',\n    display: 'inline-block'\n  },  input: {\n    display: 'none'\n  },\n  filename:{\n    marginLeft:'10px'\n  },\n  list: {\n    backgroundColor: '#f3f3f3'\n  }\n}))\n\nexport default function EditCourse ({match}) {\n  const classes = useStyles()\n  const [course, setCourse] = useState({\n      name: '',\n      description: '',\n      image:'',\n      category:'',\n      instructor:{},\n      lessons: []\n    })\n  const [values, setValues] = useState({\n      redirect: false,\n      error: ''\n    })\n    useEffect(() => {\n      const abortController = new AbortController()\n      const signal = abortController.signal\n  \n      read({courseId: match.params.courseId}, signal).then((data) => {\n        if (data.error) {\n          setValues({...values, error: data.error})\n        } else {\n          data.image = ''\n          setCourse(data)\n        }\n      })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [match.params.courseId])\n  const jwt = auth.isAuthenticated()\n  const handleChange = name => event => {\n    const value = name === 'image'\n    ? event.target.files[0]\n    : event.target.value\n    setCourse({ ...course, [name]: value })\n  }\n  const handleLessonChange = (name, index) => event => {\n    const lessons = course.lessons\n    lessons[index][name] =  event.target.value\n    setCourse({ ...course, lessons: lessons })\n  }\n  const deleteLesson = index => event => {\n    const lessons = course.lessons\n    lessons.splice(index, 1)\n    setCourse({...course, lessons:lessons})\n }\n  const moveUp = index => event => {\n      const lessons = course.lessons\n      const moveUp = lessons[index]\n      lessons[index] = lessons[index-1]\n      lessons[index-1] = moveUp\n      setCourse({ ...course, lessons: lessons })\n  }\n  const clickSubmit = () => {\n    let courseData = new FormData()\n    course.name && courseData.append('name', course.name)\n    course.description && courseData.append('description', course.description)\n    course.image && courseData.append('image', course.image)\n    course.category && courseData.append('category', course.category)\n    courseData.append('lessons', JSON.stringify(course.lessons))\n    update({\n        courseId: match.params.courseId\n      }, {\n        t: jwt.token\n      }, courseData).then((data) => {\n        if (data && data.error) {\n            console.log(data.error)\n          setValues({...values, error: data.error})\n        } else {\n          setValues({...values, redirect: true})\n        }\n      })\n  }\n  if (values.redirect) {\n    return (<Redirect to={'/teach/course/'+course._id}/>)\n  }\n    const imageUrl = course._id\n          ? `/api/courses/photo/${course._id}?${new Date().getTime()}`\n          : '/api/courses/defaultphoto'\n    return (\n        <div className={classes.root}>\n              <Card className={classes.card}>\n                <CardHeader\n                  title={<TextField\n                    margin=\"dense\"\n                    label=\"Title\"\n                    type=\"text\"\n                    fullWidth\n                    value={course.name} onChange={handleChange('name')}\n                  />}\n                  subheader={<div>\n                        <Link to={\"/user/\"+course.instructor._id} className={classes.sub}>By {course.instructor.name}</Link>\n                        {<TextField\n                    margin=\"dense\"\n                    label=\"Category\"\n                    type=\"text\"\n                    fullWidth\n                    value={course.category} onChange={handleChange('category')}\n                  />}\n                      </div>\n                    }\n                  action={\n             auth.isAuthenticated().user && auth.isAuthenticated().user._id == course.instructor._id &&\n                (<span className={classes.action}><Button variant=\"contained\" color=\"secondary\" onClick={clickSubmit}>Save</Button>\n                    </span>)\n            }\n                />\n                <div className={classes.flex}>\n                  <CardMedia\n                    className={classes.media}\n                    image={imageUrl}\n                    title={course.name}\n                  />\n                  <div className={classes.details}>\n                  <TextField\n                    margin=\"dense\"\n                    multiline\n                    rows=\"5\"\n                    label=\"Description\"\n                    type=\"text\"\n                    className={classes.textfield}\n                    value={course.description} onChange={handleChange('description')}\n                  /><br/><br/>\n                  <input accept=\"image/*\" onChange={handleChange('image')} className={classes.input} id=\"icon-button-file\" type=\"file\" />\n                 <label htmlFor=\"icon-button-file\">\n                    <Button variant=\"outlined\" color=\"secondary\" component=\"span\">\n                    Change Photo\n                    <FileUpload/>\n                    </Button>\n                </label> <span className={classes.filename}>{course.image ? course.image.name : ''}</span><br/>\n                  </div>\n                \n\n          </div>\n                <Divider/>\n                <div>\n                <CardHeader\n                  title={<Typography variant=\"h6\" className={classes.subheading}>Lessons - Edit and Rearrange</Typography>\n                }\n                  subheader={<Typography variant=\"body1\" className={classes.subheading}>{course.lessons && course.lessons.length} lessons</Typography>}\n                />\n                <List>\n                {course.lessons && course.lessons.map((lesson, index) => {\n                    return(<span key={index}>\n                    <ListItem className={classes.list}>\n                    <ListItemAvatar>\n                        <>\n                        <Avatar>\n                        {index+1}\n                        </Avatar>\n                     { index != 0 &&     \n                      <IconButton aria-label=\"up\" color=\"primary\" onClick={moveUp(index)} className={classes.upArrow}>\n                        <ArrowUp />\n                      </IconButton>\n                     }\n                    </>\n                    </ListItemAvatar>\n                    <ListItemText\n                        primary={<><TextField\n                            margin=\"dense\"\n                            label=\"Title\"\n                            type=\"text\"\n                            fullWidth\n                            value={lesson.title} onChange={handleLessonChange('title', index)}\n                          /><br/>\n                          <TextField\n                          margin=\"dense\"\n                          multiline\n                          rows=\"5\"\n                          label=\"Content\"\n                          type=\"text\"\n                          fullWidth\n                          value={lesson.content} onChange={handleLessonChange('content', index)}\n                        /><br/>\n                        <TextField\n            margin=\"dense\"\n            label=\"Resource link\"\n            type=\"text\"\n            fullWidth\n            value={lesson.resource_url} onChange={handleLessonChange('resource_url', index)}\n          /><br/></>}\n                    />\n                    {!course.published && <ListItemSecondaryAction>\n                    <IconButton edge=\"end\" aria-label=\"up\" color=\"primary\" onClick={deleteLesson(index)}>\n                        <DeleteIcon />\n                      </IconButton>\n                    </ListItemSecondaryAction>}\n                    </ListItem>\n                    <Divider style={{backgroundColor:'rgb(106, 106, 106)'}} component=\"li\" />\n                    </span>)\n                }\n                )}\n                </List>\n                </div>\n              </Card>\n        </div>)\n}\n","import React, {useState, useEffect}  from 'react'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardMedia from '@material-ui/core/CardMedia'\nimport CardActions from '@material-ui/core/CardActions'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport {makeStyles} from '@material-ui/core/styles'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport ListSubheader from '@material-ui/core/ListSubheader'\nimport Avatar from '@material-ui/core/Avatar'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport {read, complete} from './api-enrollment.js'\nimport {Link} from 'react-router-dom'\nimport auth from './../auth/auth-helper'\nimport Divider from '@material-ui/core/Divider'\nimport Drawer from '@material-ui/core/Drawer'\nimport Info from '@material-ui/icons/Info'\nimport CheckCircle from '@material-ui/icons/CheckCircle'\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked'\nimport { CardContent } from '@material-ui/core'\n\n\nconst useStyles = makeStyles(theme => ({\n    root: theme.mixins.gutters({\n        maxWidth: 800,\n        margin: 'auto',\n        marginTop: theme.spacing(12),\n        marginLeft: 250\n      }),\n      heading: {\n        marginBottom: theme.spacing(3),\n        fontWeight: 200\n      },\n  flex:{\n    display:'flex',\n    marginBottom: 20\n  },\n  card: {\n    padding:'24px 40px 20px'\n  },\n  subheading: {\n    margin: '10px',\n    color: theme.palette.openTitle\n  },\n  details: {\n    margin: '16px',\n  },\n  sub: {\n    display: 'block',\n    margin: '3px 0px 5px 0px',\n    fontSize: '0.9em'\n  },\n  avatar: {\n    color: '#9b9b9b',\n    border: '1px solid #bdbdbd',\n    background: 'none'\n  },\n  media: {\n    height: 180,\n    display: 'inline-block',\n    width: '100%',\n    marginLeft: '16px'\n  },\n  icon: {\n    verticalAlign: 'sub'\n  },\n  category:{\n    color: '#5c5c5c',\n    fontSize: '0.9em',\n    padding: '3px 5px',\n    backgroundColor: '#dbdbdb',\n    borderRadius: '0.2em',\n    marginTop: 5\n  },\n  action: {\n    margin: '8px 24px',\n    display: 'inline-block'\n  },\n  drawer: {\n    width: 240,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: 240,\n    backgroundColor: '#616161'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n  toolbar: theme.mixins.toolbar,\n  selectedDrawer: {\n      backgroundColor: '#e9e3df'\n  },\n  unselected: {\n      backgroundColor: '#ffffff'\n  },\n  check: {\n      color:'#38cc38'\n  },\n  subhead: {\n      fontSize: '1.2em'\n  },\n  progress: {\n      textAlign: 'center',\n      color: '#dfdfdf',\n      '& span':{\n        color: '#fffde7',\n        fontSize: '1.15em'\n      }\n    },\n  para: {\n    whiteSpace: 'pre-wrap'\n  }\n}))\n\nexport default function Enrollment ({match}) {\n  const classes = useStyles()\n  const [enrollment, setEnrollment] = useState({course:{instructor:[]}, lessonStatus: []})\n  const [values, setValues] = useState({\n      error: '',\n      drawer: -1\n    })\n  const [totalComplete, setTotalComplete] = useState(0)\n    const jwt = auth.isAuthenticated()\n    useEffect(() => {\n      const abortController = new AbortController()\n      const signal = abortController.signal\n  \n      read({enrollmentId: match.params.enrollmentId}, {t: jwt.token}, signal).then((data) => {\n        if (data.error) {\n          setValues({...values, error: data.error})\n        } else {\n          totalCompleted(data.lessonStatus)\n          setEnrollment(data)\n        }\n      })\n    return function cleanup(){\n      abortController.abort()\n    }\n  }, [match.params.enrollmentId])\n  const totalCompleted = (lessons) => {\n    let count = lessons.reduce((total, lessonStatus) => {return total + (lessonStatus.complete ? 1 : 0)}, 0)\n    setTotalComplete(count)\n    return count\n  }\n  const selectDrawer = (index) => event => {\n      setValues({...values, drawer:index})\n  }\n  const markComplete = () => {\n      if(!enrollment.lessonStatus[values.drawer].complete){\n        const lessonStatus = enrollment.lessonStatus\n        lessonStatus[values.drawer].complete = true\n        let count = totalCompleted(lessonStatus)\n\n        let updatedData = {}\n        updatedData.lessonStatusId = lessonStatus[values.drawer]._id\n        updatedData.complete = true\n\n        if(count === lessonStatus.length){\n            updatedData.courseCompleted = Date.now()\n        }\n\n      complete({\n        enrollmentId: match.params.enrollmentId\n      }, {\n        t: jwt.token\n      }, updatedData).then((data) => {\n        if (data && data.error) {\n          setValues({...values, error: data.error})\n        } else {\n          setEnrollment({...enrollment, lessonStatus: lessonStatus})\n        }\n      })\n    }\n  }\n    const imageUrl = enrollment.course._id\n          ? `/api/courses/photo/${enrollment.course._id}?${new Date().getTime()}`\n          : null\n    return (\n        <div className={classes.root}>\n      <Drawer\n        className={classes.drawer}\n        variant=\"permanent\"\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      ><div className={classes.toolbar} />\n      <List>\n      <ListItem button onClick={selectDrawer(-1)} className={values.drawer == -1 ? classes.selectedDrawer : classes.unselected}>\n            <ListItemIcon><Info /></ListItemIcon>\n            <ListItemText primary={\"Course Overview\"} />\n      </ListItem>\n      </List>\n      <Divider />\n      <List className={classes.unselected}>\n      <ListSubheader component=\"div\" className={classes.subhead}>\n          Lessons\n        </ListSubheader>\n        {enrollment.lessonStatus.map((lesson, index) => (\n          <ListItem button key={index} onClick={selectDrawer(index)} className={values.drawer == index ? classes.selectedDrawer : classes.unselected}>\n            <ListItemAvatar>\n                        <Avatar className={classes.avatar}>\n                        {index+1}\n                        </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={enrollment.course.lessons[index].title} />\n            <ListItemSecondaryAction>\n                    { lesson.complete ? <CheckCircle className={classes.check}/> : <RadioButtonUncheckedIcon />}\n                    </ListItemSecondaryAction>\n          </ListItem>\n        ))}\n      </List>\n      <Divider />\n      <List>\n          <ListItem>\n        <ListItemText primary={<div className={classes.progress}><span>{totalComplete}</span> out of <span>{enrollment.lessonStatus.length}</span> completed</div>} />\n          </ListItem>\n      </List>\n    </Drawer>\n              {values.drawer == - 1 && \n              <Card className={classes.card}>\n                <CardHeader\n                  title={enrollment.course.name}\n                  subheader={<div>\n                        <Link to={\"/user/\"+enrollment.course.instructor._id} className={classes.sub}>By {enrollment.course.instructor.name}</Link>\n                        <span className={classes.category}>{enrollment.course.category}</span>\n                      </div>\n                    }\n                  action={\n                    totalComplete == enrollment.lessonStatus.length &&\n                (<span className={classes.action}>\n                  <Button variant=\"contained\" color=\"secondary\">\n                    <CheckCircle /> &nbsp; Completed\n                  </Button>\n                </span>)\n            }\n                />\n                <div className={classes.flex}>\n                  <CardMedia\n                    className={classes.media}\n                    image={imageUrl}\n                    title={enrollment.course.name}\n                  />\n                  <div className={classes.details}>\n                    <Typography variant=\"body1\" className={classes.subheading}>\n                        {enrollment.course.description}<br/>\n                    </Typography>\n                  </div>\n                </div>\n                <Divider/>\n                <div>\n                <CardHeader\n                  title={<Typography variant=\"h6\" className={classes.subheading}>Lessons</Typography>\n                }\n                  subheader={<Typography variant=\"body1\" className={classes.subheading}>{enrollment.course.lessons && enrollment.course.lessons.length} lessons</Typography>}\n                  action={\n             auth.isAuthenticated().user && auth.isAuthenticated().user._id == enrollment.course.instructor._id &&\n                (<span className={classes.action}>\n                  \n                </span>)\n            }\n                />\n                <List>\n                {enrollment.course.lessons && enrollment.course.lessons.map((lesson, i) => {\n                    return(<span key={i}>\n                    <ListItem>\n                    <ListItemAvatar>\n                        <Avatar>\n                        {i+1}\n                        </Avatar>\n                    </ListItemAvatar>\n                    <ListItemText\n                        primary={lesson.title}\n                    />\n                    </ListItem>\n                    <Divider variant=\"inset\" component=\"li\" />\n                    </span>)\n                }\n                )}\n                </List>\n                </div>\n            </Card> }\n             {values.drawer != -1 && (<>\n             <Typography variant=\"h5\" className={classes.heading}>{enrollment.course.name}</Typography>\n             <Card className={classes.card}>\n                <CardHeader\n                  title={enrollment.course.lessons[values.drawer].title}\n                  action={<Button onClick={markComplete} variant={enrollment.lessonStatus[values.drawer].complete? 'contained' : 'outlined'} color=\"secondary\">{enrollment.lessonStatus[values.drawer].complete? \"Completed\" : \"Mark as complete\"}</Button>} />\n                  <CardContent> \n                      <Typography variant=\"body1\" className={classes.para}>{enrollment.course.lessons[values.drawer].content}</Typography>\n                  </CardContent>\n                  <CardActions>\n                    <a href={enrollment.course.lessons[values.drawer].resource_url}><Button variant=\"contained\" color=\"primary\">Resource Link</Button></a>\n                </CardActions>\n                </Card></>)}\n        </div>)\n}","import React from 'react'\nimport {Route, Switch} from 'react-router-dom'\nimport Home from './core/Home'\nimport Users from './user/Users'\nimport Signup from './user/Signup'\nimport Signin from './auth/Signin'\nimport EditProfile from './user/EditProfile'\nimport Profile from './user/Profile'\nimport PrivateRoute from './auth/PrivateRoute'\nimport NewCourse from \"./course/NewCourse\";\nimport MyCourses from \"./course/MyCourses\";\nimport Menu from './core/Menu'\nimport Course from \"./course/Course\";\nimport EditCourse from \"./course/EditCourse\";\nimport Enrollment from \"./enrollment/Enrollment\"\n\nconst MainRouter = () => {\n    return (<div>\n      <Menu/>\n      <Switch>\n        <Route exact path=\"/\" component={Home}/>\n        <Route path=\"/users\" component={Users}/>\n        <Route path=\"/signup\" component={Signup}/>\n        <Route path=\"/signin\" component={Signin}/>\n        <PrivateRoute path=\"/teach/course/new/\" component={NewCourse} />\n        <Route path=\"/teach/course/edit/:courseId\" component={EditCourse} />\n        <Route path=\"/course/:courseId\" component={Course}/>\n        <PrivateRoute path=\"/user/edit/:userId\" component={EditProfile}/>\n        <PrivateRoute path=\"/teach/courses/\" component={MyCourses}/>\n        <Route path=\"/user/:userId\" component={Profile}/>\n        <PrivateRoute path=\"/learn/:enrollmentId\" component={Enrollment}/>\n        <Route path=\"/teach/course/:courseId\" component={Course}/>\n      </Switch>\n    </div>)\n}\n\nexport default MainRouter\n","import React from \"react\"\nimport {BrowserRouter} from \"react-router-dom\";\nimport theme from \"./theme\";\nimport MainRouter from \"./MainRouter\";\nimport {ThemeProvider} from '@material-ui/core'\n\nfunction App() {\n    return (\n        <BrowserRouter>\n            <ThemeProvider theme={theme}>\n                <MainRouter />\n            </ThemeProvider>\n        </BrowserRouter>\n    )}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}