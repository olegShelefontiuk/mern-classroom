(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{134:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),s=n.n(c),i=(n(134),n(11)),o=n(116),l=n(85),d=Object(o.a)({typography:{useNextVariants:!0},palette:{primary:{light:"#5c67a3",main:"#3f4771",dark:"#2e355b",contrastText:"#fff"},secondary:{light:"#ff79b0",main:"#ff4081",dark:"#c60055",contrastText:"#000"},openTitle:"#3f4771",protectedTitle:l.a[400],type:"light"}}),j=n(16),u=n(10),b=n(184),p=n(191),h=n(9),m=n.n(h),x=n(15),O=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/by/"+t.userId,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},body:r});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/"+t.courseId,{method:"GET",signal:n,headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/"+t.courseId,{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},body:r});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/"+t.courseId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/by/"+t.userId,{method:"GET",signal:r,headers:{Accept:"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/"+t.courseId+"/lesson/new",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify({lesson:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/courses/published",{method:"GET",signal:t,headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/enrollment/new/"+t.courseId,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/enrollment/enrolled",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+t.t},signal:n});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/enrollment/stats/"+t.courseId,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+n.t},signal:r});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/enrollment/"+t.enrollmentId,{method:"GET",signal:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/enrollment/complete/"+t.enrollmentId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify(r)});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),I=n(38),_=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/signin/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/signout/",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),E={isAuthenticated:function(){return"undefined"!=typeof window&&(!!sessionStorage.getItem("jwt")&&JSON.parse(sessionStorage.getItem("jwt")))},authenticate:function(e,t){"undefined"!==typeof window&&sessionStorage.setItem("jwt",JSON.stringify(e)),t()},clearJWT:function(e){"undefined"!==typeof window&&sessionStorage.removeItem("jwt"),e(),B().then((function(e){document.cookie="t=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}))},updateUser:function(e,t){if("undefined"!==typeof window&&sessionStorage.getItem("jwt")){var n=JSON.parse(sessionStorage.getItem("jwt"));n.user=e,sessionStorage.setItem("jwt",JSON.stringify(n)),t()}}},F=n(188),L=n(189),P=n(190),z=n(6),W=n(186),D=n(1),R=Object(b.a)((function(e){return{form:{minWidth:500}}}));function J(e){R();var t=Object(r.useState)({enrollmentId:"",error:"",redirect:!1}),n=Object(u.a)(t,2),a=n[0],c=n[1],s=E.isAuthenticated();return a.redirect?Object(D.jsx)(j.a,{to:"/learn/"+a.enrollmentId}):Object(D.jsx)(W.a,{variant:"contained",color:"secondary",onClick:function(){C({courseId:e.courseId},{t:s.token}).then((function(e){e&&e.error?c(Object(z.a)(Object(z.a)({},a),{},{error:e.error})):c(Object(z.a)(Object(z.a)({},a),{},{enrollmentId:e._id,redirect:!0}))}))},children:" Enroll "})}var U=Object(b.a)((function(e){return{title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle},media:{minHeight:400},gridList:{width:"100%",minHeight:200,padding:"16px 0 0px"},tile:{textAlign:"center",border:"1px solid #cecece",backgroundColor:"#04040c"},image:{height:"100%"},tileBar:{backgroundColor:"rgba(0, 0, 0, 0.85)",textAlign:"left"},tileTitle:{fontSize:"1.1em",marginBottom:"5px",color:"#fffde7",display:"block"},action:{margin:"0 10px"}}}));function G(e){var t=U();return Object(D.jsx)(F.a,{cellHeight:220,className:t.gridList,cols:2,children:e.courses.map((function(n,r){return function(t){return!e.common.find((function(e){return e.course._id==t._id}))}(n)&&Object(D.jsxs)(L.a,{className:t.tile,style:{padding:0},children:[Object(D.jsx)(i.b,{to:"/course/"+n._id,children:Object(D.jsx)("img",{className:t.image,src:"/api/courses/photo/"+n._id,alt:n.name})}),Object(D.jsx)(P.a,{className:t.tileBar,title:Object(D.jsx)(i.b,{to:"/course/"+n._id,className:t.tileTitle,children:n.name}),subtitle:Object(D.jsx)("span",{children:n.category}),actionIcon:Object(D.jsx)("div",{className:t.action,children:E.isAuthenticated()?Object(D.jsx)(J,{courseId:n._id}):Object(D.jsx)(i.b,{to:"/signin",children:"Sign in to Enroll"})})})]},r)}))})}var H=n(81),M=n.n(H),Y=n(107),V=n.n(Y),q=Object(b.a)((function(e){return{title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle},media:{minHeight:400},container:{minWidth:"100%",paddingBottom:"14px"},gridList:{width:"100%",minHeight:100,padding:"12px 0 10px"},tile:{textAlign:"center"},image:{height:"100%"},tileBar:{backgroundColor:"rgba(0, 0, 0, 0.85)",textAlign:"left"},tileTitle:{fontSize:"1.1em",marginBottom:"5px",color:"#fffde7",display:"block"},action:{margin:"0 10px"},progress:{color:"#b4f8b4"}}}));function K(e){var t=q();return Object(D.jsx)("div",{children:Object(D.jsx)(F.a,{cellHeight:120,className:t.gridList,cols:4,children:e.enrollments.map((function(e,n){return Object(D.jsxs)(L.a,{className:t.tile,children:[Object(D.jsx)(i.b,{to:"/learn/"+e._id,children:Object(D.jsx)("img",{className:t.image,src:"/api/courses/photo/"+e.course._id,alt:e.course.name})}),Object(D.jsx)(P.a,{className:t.tileBar,title:Object(D.jsx)(i.b,{to:"/learn/"+e._id,className:t.tileTitle,children:e.course.name}),actionIcon:Object(D.jsx)("div",{className:t.action,children:e.completed?Object(D.jsx)(M.a,{color:"secondary"}):Object(D.jsx)(V.a,{className:t.progress})})})]},n)}))})})}var Q=Object(b.a)((function(e){return{card:{width:"90%",margin:"auto",marginTop:20,marginBottom:e.spacing(2),padding:20,backgroundColor:"#ffffff"},extraTop:{marginTop:e.spacing(12)},title:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2.5),"px ").concat(e.spacing(2),"px"),color:e.palette.openTitle},media:{minHeight:400},gridList:{width:"100%",minHeight:200,padding:"16px 0 10px"},tile:{textAlign:"center"},image:{height:"100%"},tileBar:{backgroundColor:"rgba(0, 0, 0, 0.72)",textAlign:"left"},enrolledTitle:{color:"#efefef",marginBottom:5},action:{margin:"0 10px"},enrolledCard:{backgroundColor:"#616161"},divider:{marginBottom:16,backgroundColor:"rgb(157, 157, 157)"},noTitle:{color:"lightgrey",marginBottom:12,marginLeft:8}}}));function X(){var e=Q(),t=E.isAuthenticated(),n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)([]),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return k({t:t.token},n).then((function(e){e.error?console.log(e.error):d(e)})),function(){e.abort()}}),[]),Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return N(t).then((function(e){e.error?console.log(e.error):s(e)})),function(){e.abort()}}),[]),Object(D.jsxs)("div",{className:e.extraTop,children:[E.isAuthenticated().user&&Object(D.jsxs)(p.a,{className:"".concat(e.card," ").concat(e.enrolledCard),children:[Object(D.jsx)(I.a,{variant:"h6",component:"h2",className:e.enrolledTitle,children:"Courses you are enrolled in"}),0!=l.length?Object(D.jsx)(K,{enrollments:l}):Object(D.jsx)(I.a,{variant:"body1",className:e.noTitle,children:"No courses."})]}),Object(D.jsxs)(p.a,{className:e.card,children:[Object(D.jsx)(I.a,{variant:"h5",component:"h2",children:"All Courses"}),0!=c.length&&c.length!=l.length?Object(D.jsx)(G,{courses:c,common:l}):Object(D.jsx)(I.a,{variant:"body1",className:e.noTitle,children:"No new courses."})]})]})}var Z=n(93),$=n(192),ee=n(193),te=n(194),ne=n(196),re=n(195),ae=n(216),ce=n(197),se=n(108),ie=n.n(se),oe=n(89),le=n.n(oe),de=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/",{method:"GET",signal:t});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/"+t.userId,{method:"GET",signal:r,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),be=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/"+t.userId,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t},body:JSON.stringify(r)});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(){var e=Object(x.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/"+t.userId,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+n.t}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),he=Object(b.a)((function(e){return{root:e.mixins.gutters({padding:e.spacing(1),margin:e.spacing(5),marginTop:e.spacing(12)}),title:{margin:"".concat(e.spacing(4),"px 0 ").concat(e.spacing(2),"px"),color:e.palette.openTitle}}}));function me(){var e=he(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return je(t).then((function(e){e&&e.error?console.log(e.error):c(e)})),function(){e.abort()}}),[]),Object(D.jsxs)(Z.a,{className:e.root,elevation:4,children:[Object(D.jsx)(I.a,{variant:"h6",className:e.title,children:"All Users"}),Object(D.jsx)($.a,{dense:!0,children:a.map((function(e,t){return Object(D.jsx)(i.b,{to:"/user/"+e._id,children:Object(D.jsxs)(ee.a,{button:!0,children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{children:Object(D.jsx)(le.a,{})})}),Object(D.jsx)(re.a,{primary:e.name}),Object(D.jsx)(ne.a,{children:Object(D.jsx)(ce.a,{children:Object(D.jsx)(ie.a,{})})})]})},t)}))})]})}var xe=n(27),Oe=n(200),ge=n(198),fe=n(215),ve=n(199),ye=n(201),we=n(205),Ne=n(203),Ce=n(204),ke=n(202),Te=Object(b.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(12),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}}));function Ae(){var e=Te(),t=Object(r.useState)({name:"",password:"",email:"",open:!1,error:""}),n=Object(u.a)(t,2),a=n[0],c=n[1],s=function(e){return function(t){c(Object(z.a)(Object(z.a)({},a),{},Object(xe.a)({},e,t.target.value)))}};return Object(D.jsxs)("div",{children:[Object(D.jsxs)(p.a,{className:e.card,children:[Object(D.jsxs)(ge.a,{children:[Object(D.jsx)(I.a,{variant:"h6",className:e.title,children:"Sign Up"}),Object(D.jsx)(fe.a,{id:"name",label:"Name",className:e.textField,value:a.name,onChange:s("name"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"email",type:"email",label:"Email",className:e.textField,value:a.email,onChange:s("email"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"password",type:"password",label:"Password",className:e.textField,value:a.password,onChange:s("password"),margin:"normal"}),Object(D.jsx)("br",{})," ",a.error&&Object(D.jsxs)(I.a,{component:"p",color:"error",children:[Object(D.jsx)(ve.a,{color:"error",className:e.error,children:"error"}),a.error]})]}),Object(D.jsx)(Oe.a,{children:Object(D.jsx)(W.a,{color:"primary",variant:"contained",onClick:function(){var e={name:a.name||void 0,email:a.email||void 0,password:a.password||void 0};de(e).then((function(e){e.error?c(Object(z.a)(Object(z.a)({},a),{},{error:e.error})):c(Object(z.a)(Object(z.a)({},a),{},{error:"",open:!0}))}))},className:e.submit,children:"Submit"})})]}),Object(D.jsxs)(ye.a,{open:a.open,disableBackdropClick:!0,children:[Object(D.jsx)(ke.a,{children:"New Account"}),Object(D.jsx)(Ne.a,{children:Object(D.jsx)(Ce.a,{children:"New account successfully created."})}),Object(D.jsx)(we.a,{children:Object(D.jsx)(i.b,{to:"/signin",children:Object(D.jsx)(W.a,{color:"primary",autoFocus:"autoFocus",variant:"contained",children:"Sign In"})})})]})]})}var Se=Object(b.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(12),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}}));function Ie(e){var t=Se(),n=Object(r.useState)({email:"",password:"",error:"",redirectToReferrer:!1}),a=Object(u.a)(n,2),c=a[0],s=a[1],i=function(e){return function(t){s(Object(z.a)(Object(z.a)({},c),{},Object(xe.a)({},e,t.target.value)))}},o=(e.location.state||{from:{pathname:"/"}}).from;return c.redirectToReferrer?Object(D.jsx)(j.a,{to:o}):Object(D.jsxs)(p.a,{className:t.card,children:[Object(D.jsxs)(ge.a,{children:[Object(D.jsx)(I.a,{variant:"h6",className:t.title,children:"Sign In"}),Object(D.jsx)(fe.a,{id:"email",type:"email",label:"Email",className:t.textField,value:c.email,onChange:i("email"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"password",type:"password",label:"Password",className:t.textField,value:c.password,onChange:i("password"),margin:"normal"}),Object(D.jsx)("br",{})," ",c.error&&Object(D.jsxs)(I.a,{component:"p",color:"error",children:[Object(D.jsx)(ve.a,{color:"error",className:t.error,children:"error"}),c.error]})]}),Object(D.jsx)(Oe.a,{children:Object(D.jsx)(W.a,{color:"primary",variant:"contained",onClick:function(){var e={email:c.email||void 0,password:c.password||void 0};_(e).then((function(e){e.error?s(Object(z.a)(Object(z.a)({},c),{},{error:e.error})):E.authenticate(e,(function(){s(Object(z.a)(Object(z.a)({},c),{},{error:"",redirectToReferrer:!0}))}))}))},className:t.submit,children:"Submit"})})]})}var _e=n(206),Be=n(217),Ee=Object(b.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(12),paddingBottom:e.spacing(2)},title:{margin:e.spacing(2),color:e.palette.protectedTitle},error:{verticalAlign:"middle"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)}}}));function Fe(e){var t=e.match,n=Ee(),a=Object(r.useState)({name:"",password:"",email:"",open:!1,error:"",redirectToProfile:!1,educator:!1}),c=Object(u.a)(a,2),s=c[0],i=c[1],o=E.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return ue({userId:t.params.userId},{t:o.token},n).then((function(e){e&&e.error?i(Object(z.a)(Object(z.a)({},s),{},{error:e.error})):i(Object(z.a)(Object(z.a)({},s),{},{name:e.name,email:e.email,educator:e.educator}))})),function(){e.abort()}}),[t.params.userId]);var l=function(e){return function(t){i(Object(z.a)(Object(z.a)({},s),{},Object(xe.a)({},e,t.target.value)))}};return s.redirectToProfile?Object(D.jsx)(j.a,{to:"/user/"+s.userId}):Object(D.jsxs)(p.a,{className:n.card,children:[Object(D.jsxs)(ge.a,{children:[Object(D.jsx)(I.a,{variant:"h6",className:n.title,children:"Edit Profile"}),Object(D.jsx)(fe.a,{id:"name",label:"Name",className:n.textField,value:s.name,onChange:l("name"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"email",type:"email",label:"Email",className:n.textField,value:s.email,onChange:l("email"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"password",type:"password",label:"Password",className:n.textField,value:s.password,onChange:l("password"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)(I.a,{variant:"subtitle1",className:n.subheading,children:"I am an Educator"}),Object(D.jsx)(_e.a,{control:Object(D.jsx)(Be.a,{classes:{checked:n.checked,bar:n.bar},checked:s.educator,onChange:function(e,t){i(Object(z.a)(Object(z.a)({},s),{},{educator:t}))}}),label:s.educator?"Yes":"No"}),Object(D.jsx)("br",{})," ",s.error&&Object(D.jsxs)(I.a,{component:"p",color:"error",children:[Object(D.jsx)(ve.a,{color:"error",className:n.error,children:"error"}),s.error]})]}),Object(D.jsx)(Oe.a,{children:Object(D.jsx)(W.a,{color:"primary",variant:"contained",onClick:function(){var e={name:s.name||void 0,email:s.email||void 0,password:s.password||void 0,educator:s.educator};be({userId:t.params.userId},{t:o.token},e).then((function(e){e&&e.error?i(Object(z.a)(Object(z.a)({},s),{},{error:e.error})):E.updateUser(e,(function(){i(Object(z.a)(Object(z.a)({},s),{},{userId:e._id,redirectToProfile:!0}))}))}))},className:n.submit,children:"Submit"})})]})}var Le=n(83),Pe=n.n(Le),ze=n(207),We=n(55),De=n.n(We);function Re(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],d=E.isAuthenticated(),b=function(){c(!1)};return o?Object(D.jsx)(j.a,{to:"/"}):Object(D.jsxs)("span",{children:[Object(D.jsx)(ce.a,{"aria-label":"Delete",onClick:function(){c(!0)},color:"secondary",children:Object(D.jsx)(De.a,{})}),Object(D.jsxs)(ye.a,{open:a,onClose:b,children:[Object(D.jsx)(ke.a,{children:"Delete Account"}),Object(D.jsx)(Ne.a,{children:Object(D.jsx)(Ce.a,{children:"Confirm to delete your account."})}),Object(D.jsxs)(we.a,{children:[Object(D.jsx)(W.a,{onClick:b,color:"primary",children:"Cancel"}),Object(D.jsx)(W.a,{onClick:function(){pe({userId:e.userId},{t:d.token}).then((function(e){e&&e.error?console.log(e.error):(E.clearJWT((function(){return console.log("deleted")})),l(!0))}))},color:"secondary",autoFocus:"autoFocus",children:"Confirm"})]})]})]})}var Je=Object(b.a)((function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(12)}),title:{marginTop:e.spacing(3),color:e.palette.protectedTitle},bigAvatar:{width:60,height:60,margin:10}}}));function Ue(e){var t=e.match,n=Je(),a=Object(r.useState)({}),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(u.a)(l,2),b=d[0],p=d[1],h=E.isAuthenticated();if(Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return ue({userId:t.params.userId},{t:h.token},n).then((function(e){e&&e.error?p(!0):o(e)})),function(){e.abort()}}),[t.params.userId]),b)return Object(D.jsx)(j.a,{to:"/signin"});var m=s._id?"/api/users/photo/".concat(s._id,"?").concat((new Date).getTime()):null;return Object(D.jsxs)(Z.a,{className:n.root,elevation:4,children:[Object(D.jsx)(I.a,{variant:"h6",className:n.title,children:"Profile"}),Object(D.jsxs)($.a,{dense:!0,children:[Object(D.jsxs)(ee.a,{children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{src:m,className:n.bigAvatar})}),Object(D.jsx)(re.a,{primary:s.name,secondary:s.email})," ",E.isAuthenticated().user&&E.isAuthenticated().user._id==s._id&&Object(D.jsxs)(ne.a,{children:[Object(D.jsx)(i.b,{to:"/user/edit/"+s._id,children:Object(D.jsx)(ce.a,{"aria-label":"Edit",color:"primary",children:Object(D.jsx)(Pe.a,{})})}),Object(D.jsx)(Re,{userId:s._id})]})]}),Object(D.jsx)(ze.a,{}),Object(D.jsx)(ee.a,{children:Object(D.jsx)(re.a,{primary:"Joined: "+new Date(s.created).toDateString()})})]})]})}var Ge=n(117),He=function(e){var t=e.component,n=Object(Ge.a)(e,["component"]);return Object(D.jsx)(j.b,Object(z.a)(Object(z.a)({},n),{},{render:function(e){return E.isAuthenticated()?Object(D.jsx)(t,Object(z.a)({},e)):Object(D.jsx)(j.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},Me=n(84),Ye=n.n(Me),Ve=Object(b.a)((function(e){return{card:{maxWidth:600,margin:"auto",textAlign:"center",marginTop:e.spacing(12),paddingBottom:e.spacing(2)},error:{verticalAlign:"middle"},title:{marginTop:e.spacing(2),color:e.palette.openTitle},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:300},submit:{margin:"auto",marginBottom:e.spacing(2)},input:{display:"none"},filename:{marginLeft:"10px"}}}));function qe(){var e=Ve(),t=Object(r.useState)({name:"",description:"",image:"",category:"",redirect:!1,error:""}),n=Object(u.a)(t,2),a=n[0],c=n[1],s=E.isAuthenticated(),o=function(e){return function(t){var n="image"===e?t.target.files[0]:t.target.value;c(Object(z.a)(Object(z.a)({},a),{},Object(xe.a)({},e,n)))}};return a.redirect?Object(D.jsx)(j.a,{to:"/teach/courses"}):Object(D.jsx)("div",{children:Object(D.jsxs)(p.a,{className:e.card,children:[Object(D.jsxs)(ge.a,{children:[Object(D.jsx)(I.a,{variant:"h6",className:e.title,children:"New Course"}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{accept:"image/*",onChange:o("image"),className:e.input,id:"icon-button-file",type:"file"}),Object(D.jsx)("label",{htmlFor:"icon-button-file",children:Object(D.jsxs)(W.a,{variant:"contained",color:"secondary",component:"span",children:["Upload Photo",Object(D.jsx)(Ye.a,{})]})})," ",Object(D.jsx)("span",{className:e.filename,children:a.image?a.image.name:""}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"name",label:"Name",className:e.textField,value:a.name,onChange:o("name"),margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"multiline-flexible",label:"Description",multiline:!0,rows:"2",value:a.description,onChange:o("description"),className:e.textField,margin:"normal"}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{id:"category",label:"Category",className:e.textField,value:a.category,onChange:o("category"),margin:"normal"}),Object(D.jsx)("br",{}),a.error&&Object(D.jsxs)(I.a,{component:"p",color:"error",children:[Object(D.jsx)(ve.a,{color:"error",className:e.error,children:"error"}),a.error]})]}),Object(D.jsxs)(Oe.a,{children:[Object(D.jsx)(W.a,{color:"primary",variant:"contained",onClick:function(){var e=new FormData;a.name&&e.append("name",a.name),a.description&&e.append("description",a.description),a.image&&e.append("image",a.image),a.category&&e.append("category",a.category),O({userId:s.user._id},{t:s.token},e).then((function(e){e.error?c(Object(z.a)(Object(z.a)({},a),{},{error:e.error})):c(Object(z.a)(Object(z.a)({},a),{},{error:"",redirect:!0}))}))},className:e.submit,children:"Submit"}),Object(D.jsx)(i.b,{to:"/teach/courses",className:e.submit,children:Object(D.jsx)(W.a,{variant:"contained",children:"Cancel"})})]})]})})}var Ke=Object(b.a)((function(e){return{root:e.mixins.gutters({maxWidth:600,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(12)}),title:{margin:"".concat(e.spacing(3),"px 0 ").concat(e.spacing(3),"px ").concat(e.spacing(1),"px"),color:e.palette.protectedTitle,fontSize:"1.2em"},addButton:{float:"right"},leftIcon:{marginRight:"8px"},avatar:{borderRadius:0,width:65,height:40},listText:{marginLeft:16}}}));function Qe(){var e=Ke(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=E.isAuthenticated();return Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return y({userId:b.user._id},{t:b.token},t).then((function(e){e.error?d(!0):c(e)})),function(){e.abort()}}),[]),l?Object(D.jsx)(j.a,{to:"/signin"}):Object(D.jsx)("div",{children:Object(D.jsxs)(Z.a,{className:e.root,elevation:4,children:[Object(D.jsxs)(I.a,{type:"title",className:e.title,children:["Your Courses",Object(D.jsx)("span",{className:e.addButton,children:Object(D.jsx)(i.b,{to:"/teach/course/new",children:Object(D.jsxs)(W.a,{color:"primary",variant:"contained",children:[Object(D.jsx)(ve.a,{className:e.leftIcon,children:"add_box"}),"  New Course"]})})})]}),Object(D.jsx)($.a,{dense:!0,children:a.map((function(t,n){return Object(D.jsxs)(i.b,{to:"/teach/course/"+t._id,children:[Object(D.jsxs)(ee.a,{button:!0,children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{src:"/api/courses/photo/"+t._id+"?"+(new Date).getTime(),className:e.avatar})}),Object(D.jsx)(re.a,{primary:t.name,secondary:t.description,className:e.listText})]}),Object(D.jsx)(ze.a,{})]},n)}))})]})})}var Xe=n(208),Ze=n(209),$e=n(109),et=n.n($e),tt=n(110),nt=n.n(tt),rt=function(e,t){return e.location.pathname==t?{color:"#f57c00"}:{color:"#fffde7"}},at=function(e,t){return e.location.pathname.includes(t)?{color:"#fffde7",backgroundColor:"#f57c00",marginRight:10}:{color:"#616161",backgroundColor:"#fffde7",border:"1px solid #f57c00",marginRight:10}},ct=Object(j.g)((function(e){var t=e.history;return Object(D.jsx)(Xe.a,{position:"fixed",style:{zIndex:12343455},children:Object(D.jsxs)(Ze.a,{children:[Object(D.jsx)(I.a,{variant:"h6",color:"inherit",children:"MERN Classroom"}),Object(D.jsxs)("div",{children:[Object(D.jsx)(i.b,{to:"/",children:Object(D.jsx)(ce.a,{"aria-label":"Home",style:rt(t,"/"),children:Object(D.jsx)(et.a,{})})}),Object(D.jsx)(i.b,{to:"/users",children:Object(D.jsx)(W.a,{style:rt(t,"/users"),children:"Users"})})]}),Object(D.jsx)("div",{style:{position:"absolute",right:"10px"},children:Object(D.jsxs)("span",{style:{float:"right"},children:[!E.isAuthenticated()&&Object(D.jsxs)("span",{children:[Object(D.jsx)(i.b,{to:"/signup",children:Object(D.jsx)(W.a,{style:rt(t,"/signup"),children:"Sign up"})}),Object(D.jsx)(i.b,{to:"/signin",children:Object(D.jsx)(W.a,{style:rt(t,"/signin"),children:"Sign In"})})]}),E.isAuthenticated()&&Object(D.jsxs)("span",{children:[E.isAuthenticated().user.educator&&Object(D.jsx)(i.b,{to:"/teach/courses",children:Object(D.jsxs)(W.a,{style:at(t,"/teach/"),children:[Object(D.jsx)(nt.a,{})," Teach"]})}),Object(D.jsx)(i.b,{to:"/user/"+E.isAuthenticated().user._id,children:Object(D.jsx)(W.a,{style:rt(t,"/user/"+E.isAuthenticated().user._id),children:"My Profile"})}),Object(D.jsx)(W.a,{color:"inherit",onClick:function(){E.clearJWT((function(){return t.push("/")}))},children:"Sign out"})]})]})})]})})})),st=n(210),it=n(211),ot=n(112),lt=n.n(ot);function dt(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=E.isAuthenticated(),i=function(){c(!1)};return Object(D.jsxs)("span",{children:[Object(D.jsx)(ce.a,{"aria-label":"Delete",onClick:function(){c(!0)},color:"secondary",children:Object(D.jsx)(De.a,{})}),Object(D.jsxs)(ye.a,{open:a,onClose:i,children:[Object(D.jsx)(ke.a,{children:"Delete "+e.course.name}),Object(D.jsx)(Ne.a,{children:Object(D.jsxs)(Ce.a,{children:["Confirm to delete your course ",e.course.name,"."]})}),Object(D.jsxs)(we.a,{children:[Object(D.jsx)(W.a,{onClick:i,color:"primary",children:"Cancel"}),Object(D.jsx)(W.a,{onClick:function(){v({courseId:e.course._id},{t:s.token}).then((function(t){t.error?console.log(t.error):(c(!1),e.onRemove(e.course))}))},color:"secondary",autoFocus:"autoFocus",children:"Confirm"})]})]})]})}var jt=n(111),ut=n.n(jt),bt=Object(b.a)((function(e){return{form:{minWidth:500}}}));function pt(e){var t=bt(),n=Object(r.useState)(!1),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)({title:"",content:"",resource_url:""}),o=Object(u.a)(i,2),l=o[0],d=o[1],j=function(e){return function(t){d(Object(z.a)(Object(z.a)({},l),{},Object(xe.a)({},e,t.target.value)))}},b=function(){s(!1)};return Object(D.jsxs)("div",{children:[Object(D.jsxs)(W.a,{"aria-label":"Add Lesson",color:"primary",variant:"contained",onClick:function(){s(!0)},children:[Object(D.jsx)(ut.a,{})," \xa0 New Lesson"]}),Object(D.jsx)(ye.a,{open:c,onClose:b,"aria-labelledby":"form-dialog-title",children:Object(D.jsxs)("div",{className:t.form,children:[Object(D.jsx)(ke.a,{id:"form-dialog-title",children:"Add New Lesson"}),Object(D.jsxs)(Ne.a,{children:[Object(D.jsx)(fe.a,{margin:"dense",label:"Title",type:"text",fullWidth:!0,value:l.title,onChange:j("title")}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{margin:"dense",label:"Content",type:"text",multiline:!0,rows:"5",fullWidth:!0,value:l.content,onChange:j("content")}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{margin:"dense",label:"Resource link",type:"text",fullWidth:!0,value:l.resource_url,onChange:j("resource_url")}),Object(D.jsx)("br",{})]}),Object(D.jsxs)(we.a,{children:[Object(D.jsx)(W.a,{onClick:b,color:"primary",variant:"contained",children:"Cancel"}),Object(D.jsx)(W.a,{onClick:function(){var t=E.isAuthenticated(),n={title:l.title||void 0,content:l.content||void 0,resource_url:l.resource_url||void 0};w({courseId:e.courseId},{t:t.token},n).then((function(t){t&&t.error?d(Object(z.a)(Object(z.a)({},l),{},{error:t.error})):(e.addLesson(t),d(Object(z.a)(Object(z.a)({},l),{},{title:"",content:"",resource_url:""})),s(!1))}))},color:"secondary",variant:"contained",children:"Add"})]})]})})]})}var ht=Object(b.a)((function(e){return{root:e.mixins.gutters({maxWidth:800,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(12)}),flex:{display:"flex",marginBottom:20},card:{padding:"24px 40px 40px"},subheading:{margin:"10px",color:e.palette.openTitle},details:{margin:"16px"},sub:{display:"block",margin:"3px 0px 5px 0px",fontSize:"0.9em"},media:{height:190,display:"inline-block",width:"100%",marginLeft:"16px"},icon:{verticalAlign:"sub"},category:{color:"#5c5c5c",fontSize:"0.9em",padding:"3px 5px",backgroundColor:"#dbdbdb",borderRadius:"0.2em",marginTop:5},action:{margin:"10px 0px",display:"flex",justifyContent:"flex-end"},statSpan:{margin:"7px 10px 0 10px",alignItems:"center",color:"#616161",display:"inline-flex","& svg":{marginRight:10,color:"#b6ab9a"}},enroll:{float:"right"}}}));function mt(e){var t=e.match,n=ht(),a=Object(r.useState)({}),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)({instructor:{}}),d=Object(u.a)(l,2),b=d[0],h=d[1],m=Object(r.useState)({redirect:!1,error:""}),x=Object(u.a)(m,2),O=x[0],v=x[1],y=Object(r.useState)(!1),w=Object(u.a)(y,2),N=w[0],C=w[1],k=E.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return g({courseId:t.params.courseId},n).then((function(e){e.error?v(Object(z.a)(Object(z.a)({},O),{},{error:e.error})):h(e)})),function(){e.abort()}}),[t.params.courseId]),Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return T({courseId:t.params.courseId},{t:k.token},n).then((function(e){e.error?v(Object(z.a)(Object(z.a)({},O),{},{error:e.error})):o(e)})),function(){e.abort()}}),[t.params.courseId]);var A=function(){C(!1)};if(O.redirect)return Object(D.jsx)(j.a,{to:"/teach/courses"});var S=b._id?"/api/courses/photo/".concat(b._id,"?").concat((new Date).getTime()):null;return Object(D.jsxs)("div",{className:n.root,children:[Object(D.jsxs)(p.a,{className:n.card,children:[Object(D.jsx)(st.a,{title:b.name,subheader:Object(D.jsxs)("div",{children:[Object(D.jsxs)(i.b,{to:"/user/"+b.instructor._id,className:n.sub,children:["By ",b.instructor.name]}),Object(D.jsx)("span",{className:n.category,children:b.category})]}),action:Object(D.jsxs)(D.Fragment,{children:[E.isAuthenticated().user&&E.isAuthenticated().user._id==b.instructor._id&&Object(D.jsxs)("span",{className:n.action,children:[Object(D.jsx)(i.b,{to:"/teach/course/edit/"+b._id,children:Object(D.jsx)(ce.a,{"aria-label":"Edit",color:"secondary",children:Object(D.jsx)(Pe.a,{})})}),b.published?Object(D.jsx)(W.a,{color:"primary",variant:"outlined",children:"Published"}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(W.a,{color:"secondary",variant:"outlined",onClick:function(){b.lessons.length>0&&C(!0)},children:0==b.lessons.length?"Add atleast 1 lesson to publish":"Publish"}),Object(D.jsx)(dt,{course:b,onRemove:function(e){v(Object(z.a)(Object(z.a)({},O),{},{redirect:!0}))}})]})]}),b.published&&Object(D.jsxs)("div",{children:[Object(D.jsxs)("span",{className:n.statSpan,children:[Object(D.jsx)(lt.a,{})," ",s.totalEnrolled," enrolled "]}),Object(D.jsxs)("span",{className:n.statSpan,children:[Object(D.jsx)(M.a,{})," ",s.totalCompleted," completed "]})]})]})}),Object(D.jsxs)("div",{className:n.flex,children:[Object(D.jsx)(it.a,{className:n.media,image:S,title:b.name}),Object(D.jsxs)("div",{className:n.details,children:[Object(D.jsxs)(I.a,{variant:"body1",className:n.subheading,children:[b.description,Object(D.jsx)("br",{})]}),b.published&&Object(D.jsx)("div",{className:n.enroll,children:Object(D.jsx)(J,{courseId:b._id})})]})]}),Object(D.jsx)(ze.a,{}),Object(D.jsxs)("div",{children:[Object(D.jsx)(st.a,{title:Object(D.jsx)(I.a,{variant:"h6",className:n.subheading,children:"Lessons"}),subheader:Object(D.jsxs)(I.a,{variant:"body1",className:n.subheading,children:[b.lessons&&b.lessons.length," lessons"]}),action:E.isAuthenticated().user&&E.isAuthenticated().user._id==b.instructor._id&&!b.published&&Object(D.jsx)("span",{className:n.action,children:Object(D.jsx)(pt,{courseId:b._id,addLesson:function(e){h(e)}})})}),Object(D.jsx)($.a,{children:b.lessons&&b.lessons.map((function(e,t){return Object(D.jsxs)("span",{children:[Object(D.jsxs)(ee.a,{children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{children:t+1})}),Object(D.jsx)(re.a,{primary:e.title})]}),Object(D.jsx)(ze.a,{variant:"inset",component:"li"})]},t)}))})]})]}),Object(D.jsxs)(ye.a,{open:N,onClose:A,"aria-labelledby":"form-dialog-title",children:[Object(D.jsx)(ke.a,{id:"form-dialog-title",children:"Publish Course"}),Object(D.jsxs)(Ne.a,{children:[Object(D.jsx)(I.a,{variant:"body1",children:"Publishing your course will make it live to students for enrollment. "}),Object(D.jsx)(I.a,{variant:"body1",children:"Make sure all lessons are added and ready for publishing."})]}),Object(D.jsxs)(we.a,{children:[Object(D.jsx)(W.a,{onClick:A,color:"primary",variant:"contained",children:"Cancel"}),Object(D.jsx)(W.a,{onClick:function(){var e=new FormData;e.append("published",!0),f({courseId:t.params.courseId},{t:k.token},e).then((function(e){e&&e.error?v(Object(z.a)(Object(z.a)({},O),{},{error:e.error})):(h(Object(z.a)(Object(z.a)({},b),{},{published:!0})),C(!1))}))},color:"secondary",variant:"contained",children:"Publish"})]})]})]})}var xt=n(113),Ot=n.n(xt),gt=Object(b.a)((function(e){return{root:e.mixins.gutters({maxWidth:800,margin:"auto",padding:e.spacing(3),marginTop:e.spacing(12)}),flex:{display:"flex",marginBottom:20},card:{padding:"24px 40px 40px"},subheading:{margin:"10px",color:e.palette.openTitle},details:{margin:"16px"},upArrow:{border:"2px solid #f57c00",marginLeft:3,marginTop:10,padding:4},sub:{display:"block",margin:"3px 0px 5px 0px",fontSize:"0.9em"},media:{height:250,display:"inline-block",width:"50%",marginLeft:"16px"},icon:{verticalAlign:"sub"},textfield:{width:350},action:{margin:"8px 24px",display:"inline-block"},input:{display:"none"},filename:{marginLeft:"10px"},list:{backgroundColor:"#f3f3f3"}}}));function ft(e){var t=e.match,n=gt(),a=Object(r.useState)({name:"",description:"",image:"",category:"",instructor:{},lessons:[]}),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)({redirect:!1,error:""}),d=Object(u.a)(l,2),b=d[0],h=d[1];Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return g({courseId:t.params.courseId},n).then((function(e){e.error?h(Object(z.a)(Object(z.a)({},b),{},{error:e.error})):(e.image="",o(e))})),function(){e.abort()}}),[t.params.courseId]);var m=E.isAuthenticated(),x=function(e){return function(t){var n="image"===e?t.target.files[0]:t.target.value;o(Object(z.a)(Object(z.a)({},s),{},Object(xe.a)({},e,n)))}},O=function(e,t){return function(n){var r=s.lessons;r[t][e]=n.target.value,o(Object(z.a)(Object(z.a)({},s),{},{lessons:r}))}},v=function(e){return function(t){var n=s.lessons;n.splice(e,1),o(Object(z.a)(Object(z.a)({},s),{},{lessons:n}))}},y=function(e){return function(t){var n=s.lessons,r=n[e];n[e]=n[e-1],n[e-1]=r,o(Object(z.a)(Object(z.a)({},s),{},{lessons:n}))}};if(b.redirect)return Object(D.jsx)(j.a,{to:"/teach/course/"+s._id});var w=s._id?"/api/courses/photo/".concat(s._id,"?").concat((new Date).getTime()):"/api/courses/defaultphoto";return Object(D.jsx)("div",{className:n.root,children:Object(D.jsxs)(p.a,{className:n.card,children:[Object(D.jsx)(st.a,{title:Object(D.jsx)(fe.a,{margin:"dense",label:"Title",type:"text",fullWidth:!0,value:s.name,onChange:x("name")}),subheader:Object(D.jsxs)("div",{children:[Object(D.jsxs)(i.b,{to:"/user/"+s.instructor._id,className:n.sub,children:["By ",s.instructor.name]}),Object(D.jsx)(fe.a,{margin:"dense",label:"Category",type:"text",fullWidth:!0,value:s.category,onChange:x("category")})]}),action:E.isAuthenticated().user&&E.isAuthenticated().user._id==s.instructor._id&&Object(D.jsx)("span",{className:n.action,children:Object(D.jsx)(W.a,{variant:"contained",color:"secondary",onClick:function(){var e=new FormData;s.name&&e.append("name",s.name),s.description&&e.append("description",s.description),s.image&&e.append("image",s.image),s.category&&e.append("category",s.category),e.append("lessons",JSON.stringify(s.lessons)),f({courseId:t.params.courseId},{t:m.token},e).then((function(e){e&&e.error?(console.log(e.error),h(Object(z.a)(Object(z.a)({},b),{},{error:e.error}))):h(Object(z.a)(Object(z.a)({},b),{},{redirect:!0}))}))},children:"Save"})})}),Object(D.jsxs)("div",{className:n.flex,children:[Object(D.jsx)(it.a,{className:n.media,image:w,title:s.name}),Object(D.jsxs)("div",{className:n.details,children:[Object(D.jsx)(fe.a,{margin:"dense",multiline:!0,rows:"5",label:"Description",type:"text",className:n.textfield,value:s.description,onChange:x("description")}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("input",{accept:"image/*",onChange:x("image"),className:n.input,id:"icon-button-file",type:"file"}),Object(D.jsx)("label",{htmlFor:"icon-button-file",children:Object(D.jsxs)(W.a,{variant:"outlined",color:"secondary",component:"span",children:["Change Photo",Object(D.jsx)(Ye.a,{})]})})," ",Object(D.jsx)("span",{className:n.filename,children:s.image?s.image.name:""}),Object(D.jsx)("br",{})]})]}),Object(D.jsx)(ze.a,{}),Object(D.jsxs)("div",{children:[Object(D.jsx)(st.a,{title:Object(D.jsx)(I.a,{variant:"h6",className:n.subheading,children:"Lessons - Edit and Rearrange"}),subheader:Object(D.jsxs)(I.a,{variant:"body1",className:n.subheading,children:[s.lessons&&s.lessons.length," lessons"]})}),Object(D.jsx)($.a,{children:s.lessons&&s.lessons.map((function(e,t){return Object(D.jsxs)("span",{children:[Object(D.jsxs)(ee.a,{className:n.list,children:[Object(D.jsx)(te.a,{children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ae.a,{children:t+1}),0!=t&&Object(D.jsx)(ce.a,{"aria-label":"up",color:"primary",onClick:y(t),className:n.upArrow,children:Object(D.jsx)(Ot.a,{})})]})}),Object(D.jsx)(re.a,{primary:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(fe.a,{margin:"dense",label:"Title",type:"text",fullWidth:!0,value:e.title,onChange:O("title",t)}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{margin:"dense",multiline:!0,rows:"5",label:"Content",type:"text",fullWidth:!0,value:e.content,onChange:O("content",t)}),Object(D.jsx)("br",{}),Object(D.jsx)(fe.a,{margin:"dense",label:"Resource link",type:"text",fullWidth:!0,value:e.resource_url,onChange:O("resource_url",t)}),Object(D.jsx)("br",{})]})}),!s.published&&Object(D.jsx)(ne.a,{children:Object(D.jsx)(ce.a,{edge:"end","aria-label":"up",color:"primary",onClick:v(t),children:Object(D.jsx)(De.a,{})})})]}),Object(D.jsx)(ze.a,{style:{backgroundColor:"rgb(106, 106, 106)"},component:"li"})]},t)}))})]})]})})}var vt=n(213),yt=n(212),wt=n(218),Nt=n(114),Ct=n.n(Nt),kt=n(92),Tt=n.n(kt),At=n(115),St=n.n(At),It=Object(b.a)((function(e){return{root:e.mixins.gutters({maxWidth:800,margin:"auto",marginTop:e.spacing(12),marginLeft:250}),heading:{marginBottom:e.spacing(3),fontWeight:200},flex:{display:"flex",marginBottom:20},card:{padding:"24px 40px 20px"},subheading:{margin:"10px",color:e.palette.openTitle},details:{margin:"16px"},sub:{display:"block",margin:"3px 0px 5px 0px",fontSize:"0.9em"},avatar:{color:"#9b9b9b",border:"1px solid #bdbdbd",background:"none"},media:{height:180,display:"inline-block",width:"100%",marginLeft:"16px"},icon:{verticalAlign:"sub"},category:{color:"#5c5c5c",fontSize:"0.9em",padding:"3px 5px",backgroundColor:"#dbdbdb",borderRadius:"0.2em",marginTop:5},action:{margin:"8px 24px",display:"inline-block"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#616161"},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,selectedDrawer:{backgroundColor:"#e9e3df"},unselected:{backgroundColor:"#ffffff"},check:{color:"#38cc38"},subhead:{fontSize:"1.2em"},progress:{textAlign:"center",color:"#dfdfdf","& span":{color:"#fffde7",fontSize:"1.15em"}},para:{whiteSpace:"pre-wrap"}}}));function _t(e){var t=e.match,n=It(),a=Object(r.useState)({course:{instructor:[]},lessonStatus:[]}),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)({error:"",drawer:-1}),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(0),m=Object(u.a)(h,2),x=m[0],O=m[1],g=E.isAuthenticated();Object(r.useEffect)((function(){var e=new AbortController,n=e.signal;return A({enrollmentId:t.params.enrollmentId},{t:g.token},n).then((function(e){e.error?b(Object(z.a)(Object(z.a)({},j),{},{error:e.error})):(f(e.lessonStatus),o(e))})),function(){e.abort()}}),[t.params.enrollmentId]);var f=function(e){var t=e.reduce((function(e,t){return e+(t.complete?1:0)}),0);return O(t),t},v=function(e){return function(t){b(Object(z.a)(Object(z.a)({},j),{},{drawer:e}))}},y=s.course._id?"/api/courses/photo/".concat(s.course._id,"?").concat((new Date).getTime()):null;return Object(D.jsxs)("div",{className:n.root,children:[Object(D.jsxs)(wt.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},children:[Object(D.jsx)("div",{className:n.toolbar}),Object(D.jsx)($.a,{children:Object(D.jsxs)(ee.a,{button:!0,onClick:v(-1),className:-1==j.drawer?n.selectedDrawer:n.unselected,children:[Object(D.jsx)(yt.a,{children:Object(D.jsx)(Ct.a,{})}),Object(D.jsx)(re.a,{primary:"Course Overview"})]})}),Object(D.jsx)(ze.a,{}),Object(D.jsxs)($.a,{className:n.unselected,children:[Object(D.jsx)(vt.a,{component:"div",className:n.subhead,children:"Lessons"}),s.lessonStatus.map((function(e,t){return Object(D.jsxs)(ee.a,{button:!0,onClick:v(t),className:j.drawer==t?n.selectedDrawer:n.unselected,children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{className:n.avatar,children:t+1})}),Object(D.jsx)(re.a,{primary:s.course.lessons[t].title}),Object(D.jsx)(ne.a,{children:e.complete?Object(D.jsx)(Tt.a,{className:n.check}):Object(D.jsx)(St.a,{})})]},t)}))]}),Object(D.jsx)(ze.a,{}),Object(D.jsx)($.a,{children:Object(D.jsx)(ee.a,{children:Object(D.jsx)(re.a,{primary:Object(D.jsxs)("div",{className:n.progress,children:[Object(D.jsx)("span",{children:x})," out of ",Object(D.jsx)("span",{children:s.lessonStatus.length})," completed"]})})})})]}),-1==j.drawer&&Object(D.jsxs)(p.a,{className:n.card,children:[Object(D.jsx)(st.a,{title:s.course.name,subheader:Object(D.jsxs)("div",{children:[Object(D.jsxs)(i.b,{to:"/user/"+s.course.instructor._id,className:n.sub,children:["By ",s.course.instructor.name]}),Object(D.jsx)("span",{className:n.category,children:s.course.category})]}),action:x==s.lessonStatus.length&&Object(D.jsx)("span",{className:n.action,children:Object(D.jsxs)(W.a,{variant:"contained",color:"secondary",children:[Object(D.jsx)(Tt.a,{})," \xa0 Completed"]})})}),Object(D.jsxs)("div",{className:n.flex,children:[Object(D.jsx)(it.a,{className:n.media,image:y,title:s.course.name}),Object(D.jsx)("div",{className:n.details,children:Object(D.jsxs)(I.a,{variant:"body1",className:n.subheading,children:[s.course.description,Object(D.jsx)("br",{})]})})]}),Object(D.jsx)(ze.a,{}),Object(D.jsxs)("div",{children:[Object(D.jsx)(st.a,{title:Object(D.jsx)(I.a,{variant:"h6",className:n.subheading,children:"Lessons"}),subheader:Object(D.jsxs)(I.a,{variant:"body1",className:n.subheading,children:[s.course.lessons&&s.course.lessons.length," lessons"]}),action:E.isAuthenticated().user&&E.isAuthenticated().user._id==s.course.instructor._id&&Object(D.jsx)("span",{className:n.action})}),Object(D.jsx)($.a,{children:s.course.lessons&&s.course.lessons.map((function(e,t){return Object(D.jsxs)("span",{children:[Object(D.jsxs)(ee.a,{children:[Object(D.jsx)(te.a,{children:Object(D.jsx)(ae.a,{children:t+1})}),Object(D.jsx)(re.a,{primary:e.title})]}),Object(D.jsx)(ze.a,{variant:"inset",component:"li"})]},t)}))})]})]}),-1!=j.drawer&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(I.a,{variant:"h5",className:n.heading,children:s.course.name}),Object(D.jsxs)(p.a,{className:n.card,children:[Object(D.jsx)(st.a,{title:s.course.lessons[j.drawer].title,action:Object(D.jsx)(W.a,{onClick:function(){if(!s.lessonStatus[j.drawer].complete){var e=s.lessonStatus;e[j.drawer].complete=!0;var n=f(e),r={};r.lessonStatusId=e[j.drawer]._id,r.complete=!0,n===e.length&&(r.courseCompleted=Date.now()),S({enrollmentId:t.params.enrollmentId},{t:g.token},r).then((function(t){t&&t.error?b(Object(z.a)(Object(z.a)({},j),{},{error:t.error})):o(Object(z.a)(Object(z.a)({},s),{},{lessonStatus:e}))}))}},variant:s.lessonStatus[j.drawer].complete?"contained":"outlined",color:"secondary",children:s.lessonStatus[j.drawer].complete?"Completed":"Mark as complete"})}),Object(D.jsx)(ge.a,{children:Object(D.jsx)(I.a,{variant:"body1",className:n.para,children:s.course.lessons[j.drawer].content})}),Object(D.jsx)(Oe.a,{children:Object(D.jsx)("a",{href:s.course.lessons[j.drawer].resource_url,children:Object(D.jsx)(W.a,{variant:"contained",color:"primary",children:"Resource Link"})})})]})]})]})}var Bt=function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)(ct,{}),Object(D.jsxs)(j.d,{children:[Object(D.jsx)(j.b,{exact:!0,path:"/",component:X}),Object(D.jsx)(j.b,{path:"/users",component:me}),Object(D.jsx)(j.b,{path:"/signup",component:Ae}),Object(D.jsx)(j.b,{path:"/signin",component:Ie}),Object(D.jsx)(He,{path:"/teach/course/new/",component:qe}),Object(D.jsx)(j.b,{path:"/teach/course/edit/:courseId",component:ft}),Object(D.jsx)(j.b,{path:"/course/:courseId",component:mt}),Object(D.jsx)(He,{path:"/user/edit/:userId",component:Fe}),Object(D.jsx)(He,{path:"/teach/courses/",component:Qe}),Object(D.jsx)(j.b,{path:"/user/:userId",component:Ue}),Object(D.jsx)(He,{path:"/learn/:enrollmentId",component:_t}),Object(D.jsx)(j.b,{path:"/teach/course/:courseId",component:mt})]})]})},Et=n(214);var Ft=function(){return Object(D.jsx)(i.a,{children:Object(D.jsx)(Et.a,{theme:d,children:Object(D.jsx)(Bt,{})})})},Lt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(Ft,{})}),document.getElementById("root")),Lt()}},[[147,1,2]]]);
//# sourceMappingURL=main.acf86424.chunk.js.map